const ID_EXTENSION=chrome.runtime.id,LOCAL_CONTACT_ANONIMO="CONTACT_ANONIMO",LOCAL_CHAT_ANONIMO="CHAT_ANONIMO",LOCAL_HIDE_NAVBAR="HIDE_NAVBAR",LOCAL_DATE_VISIT="DATE_CHECK_ZAPME_VISIT",ICON_VERSION="0.4.9",IS_DEBUG=!1;var isHIDE_NAVBAR,KEYBOARD=void 0,isCHAT_OPEN=!1;const APP={GREEN_BALL:"_ahlk"},LINK={ZAPME_STORE:"https://www.zapme.app/loja",EXTENSION_ASSETS:`chrome-extension://${ID_EXTENSION}/assets/`,PLANOS:"https://zapme.app/pro",AVALIATE:"https://chromewebstore.google.com/detail/zapme-para-whatsapp-web/cngmacolcddhahlonnphddjfmddjcfod/reviews",BOT:"https://bot-sm.vercel.app",ADS:"https://zapme.app/ads",MSG:"https://zapme.app/static/msg",MS_PRO:"https://api-zapme.vercel.app/zapme",MS_PIX:"https://api-mp-qrpix.vercel.app/pix",YT:{NOME_SANDBOX:"https://www.youtube.com/watch?v=p0q3-3iqwn0&ab_channel=Luan~"}},SVG={CLOSE:' <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="grey" fill-rule="evenodd" d="M6.793 6.793a1 1 0 0 1 1.414 0L12 10.586l3.793-3.793a1 1 0 1 1 1.414 1.414L13.414 12l3.793 3.793a1 1 0 0 1-1.414 1.414L12 13.414l-3.793 3.793a1 1 0 0 1-1.414-1.414L10.586 12L6.793 8.207a1 1 0 0 1 0-1.414" clip-rule="evenodd" stroke-width="0.5" stroke=""/></svg>'},LOCAL={TAG_CONTACT:"ZAPME_TAG_CONTACT",VIEW_TAG_CONTACT:"ZAPME_VIEW_TAG_CONTACT",VIEW_FILTER_CONTACT:"ZAPME_FILTER_TAG_CONTACT",IS_AVALIADO:"IS_AVALIADO",ID_USER:"ZAPME_USER_ID",AD_IMG:"ZAPME_AD_IMG",AD_LINK:"ZAPME_AD_LINK",MSG_DAY:"ZAPME_MSG_DAY",NAME_STORAGE_ROBO:"ZAPME_ROBO_TALK_STATUS",PRIVATE_MODE:"ZAPME_PRIVATE_MODE",ID_PAG_MP:"ZAPME_ID_PAG_ZAPME",LOCAL_NAME_FAST_ACCESS:"ZAPME_FAST_ACCESS_NAME_USER",ACTUAL_VERSION:"ZAPME_V_048",LOCAL_WALLPAPER:"WALLPAPER_USER",IS_30_PRO:"IS_30_PRO",IS_TRANSFER:"ZAPME_IS_TRANSFER",LAST_TICKET_TF:"ZAPME_LAST_TICKET_TF"},NICKNAME={DB:null,isDataChange:!1,ACTIVE_NAME:null,ACTIVE_NICK:null,USER_INDEX:null,USER_AUX_INDEX:null,ALL_NAMES:[],loadAllNicknamesFromDBInMemory(e=!1){let t=NICKNAME.DB.transaction(["nicknames"],"readonly").objectStore("nicknames").openCursor(),a=[];t.onsuccess=function(t){let n=t.target.result;n?(a.push(n.value),n.continue()):(NICKNAME.ALL_NAMES=a,NICKNAME.ALL_NAMES.forEach((e,t)=>{!0===e.ACTIVE&&(NICKNAME.USER_INDEX=t,NICKNAME.ACTIVE_NAME=e.NAME,NICKNAME.ACTIVE_NICK=e.NICK,TRANSFER.ACTUAL_USER_NAME=e.NICK,TRANSFER.startMutatorTransfer())}),0==NICKNAME.ALL_NAMES.length&&localStorage.getItem("GROUP_COMAND_NAME_USE"))?(JSON.parse(localStorage.getItem("GROUP_COMAND_NAME_USE")).forEach(e=>{let t=e===localStorage.getItem("COMAND_NAME_USER");NICKNAME.insert(convertNameUser(e),e,Boolean(t))}),showMessageTimer("\uD83D\uDCAB Novo!","Nomes Personalizados n\xe3o s\xe3o perdidos ap\xf3s desconectar a conta do WhatsApp Web."),NICKNAME.loadAllNicknamesFromDBInMemory(),setTimeout(()=>localStorage.removeItem("GROUP_COMAND_NAME_USE"),3e3)):e&&NICKNAME.attUserModal()}},insert(e,t,a){let n=NICKNAME.DB.transaction(["nicknames"],"readwrite"),s=n.objectStore("nicknames");if(a){let o=s.openCursor();o.onsuccess=function(e){let t=e.target.result;if(t){let a=t.value;if(!0===a.ACTIVE){a.ACTIVE=!1;let n=t.update(a);n.onsuccess=function(){r(!0)},n.onerror=function(e){console.error("Erro ao desativar nickname anterior:",e.target.error)}}else t.continue()}else r(!0)},o.onerror=function(e){console.error("Erro ao percorrer nicknames:",e.target.error)}}else r(!1);function r(a){let n=s.add({NAME:e,NICK:t,ACTIVE:!!a});n.onsuccess=function(){NICKNAME.loadAllNicknamesFromDBInMemory(!0)}}},edit(e,t,a){let n=NICKNAME.ALL_NAMES[e].ID,s=NICKNAME.DB.transaction(["nicknames"],"readwrite"),o=s.objectStore("nicknames"),r=o.get(n);r.onsuccess=function(e){let n=e.target.result;n&&(n.NAME=t,n.NICK=a,o.put(n).onsuccess=function(){NICKNAME.loadAllNicknamesFromDBInMemory(!0)})},r.onerror=function(e){console.error("Erro ao buscar nickname para edi\xe7\xe3o:",e.target.error)}},delete(e){if(!Array.isArray(NICKNAME.ALL_NAMES)||!NICKNAME.ALL_NAMES[e]){console.warn("\xcdndice inv\xe1lido ou array de nicknames n\xe3o carregado.");return}let t=NICKNAME.ALL_NAMES[e].ID,a=NICKNAME.ALL_NAMES[e].NICK,n=NICKNAME.DB.transaction(["nicknames"],"readwrite"),s=n.objectStore("nicknames"),o=s.delete(t);e==NICKNAME.USER_INDEX&&NICKNAME.setActive(-1),o.onsuccess=function(){showMessageTimer("\uD83D\uDDD1Ô∏è Registro removido!",`${cleanNameUser(a)} foi removido da lista.`),NICKNAME.loadAllNicknamesFromDBInMemory(!0)}},setActive(e){let t=NICKNAME.DB.transaction(["nicknames"],"readwrite"),a=t.objectStore("nicknames"),n=a.openCursor(),s=0,o="";n.onsuccess=function(t){let a=t.target.result;if(a){let n=a.value,r=s===e,l=!0===n.ACTIVE;r&&!l?(n.ACTIVE=!0,o=n.NICK,a.update(n)):!r&&l&&(n.ACTIVE=!1,a.update(n)),s++,a.continue()}else e>-1&&showMessageTimer("‚≠ê Nome Selecionado!",`${cleanNameUser(o)} foi selecionado para uso.`),-1==e&&showMessageTimer("\uD83D\uDD14 Nome Limpo!",`Nenhum nome est\xe1 selecionado para uso.`),NICKNAME.USER_INDEX=e,NICKNAME.ACTIVE_NICK=o,NICKNAME.ACTIVE_NAME=cleanNameUser(o),NICKNAME.loadAllNicknamesFromDBInMemory(!0),TRANSFER.ACTUAL_USER_NAME=NICKNAME.ACTIVE_NICK},n.onerror=function(e){console.error("Erro ao percorrer nicknames:",e.target.error)}},attUserModal(){let e=document.querySelectorAll(".zapme-user-sandbox section")[0];e&&(e.querySelectorAll("div").forEach((e,t)=>{t>0&&e.remove()}),NICKNAME.loadUsersModal(),NICKNAME.isShowCreateBar(!1))},loadUsersModal(){let e=document.querySelectorAll(".zapme-user-sandbox section")[0];NICKNAME.ALL_NAMES.forEach((t,a)=>{let n=`
                <div data-number="${a+1}\xb0" title="Editar: ${cleanNameUser(t.NICK)}" class="zapme-user-sandbox-selected-${Boolean(t.NICK===NICKNAME.ACTIVE_NICK)}">
                     <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"><g fill="none" stroke="silver" stroke-linecap="round" stroke-width="0.8"><circle cx="12" cy="8" r="3.5"/><path d="M4.85 16.948c.639-2.345 3.065-3.448 5.495-3.448h3.31c2.43 0 4.856 1.103 5.496 3.448a10 10 0 0 1 .295 1.553c.06.55-.394.999-.946.999h-13c-.552 0-1.005-.45-.946-.998a10 10 0 0 1 .295-1.554Z"/></g></svg>
                    <span>${cleanNameUser(t.NICK)}</span>
                </div>   
                `;e.insertAdjacentHTML("beforeend",n)}),e.querySelectorAll("div").forEach((e,t)=>{"null"!=e.querySelector("span").textContent?e.addEventListener("click",()=>NICKNAME.setUser(t)):e.remove()})},setUser(e){let[t,a]=document.querySelectorAll(".zapme-user-sb-btns > button"),[n,s,o,r]=document.querySelectorAll("#zapme-checkbox-sandbox > input"),l=document.getElementById("zapme-user-name-sandbox"),i=NICKNAME.ALL_NAMES,c=NICKNAME.ACTIVE_NICK;NICKNAME.USER_AUX_INDEX=e-1,-1==NICKNAME.USER_AUX_INDEX?(userNameConfig="",a.style.display="none",t.style.display="none"):(userNameConfig=i[NICKNAME.USER_AUX_INDEX].NICK,a.textContent=c==userNameConfig?"N\xe3o usar":"Usar",a.style.display="inline",t.style.display="inline"),n.checked=userNameConfig.includes("!"),s.checked=userNameConfig.includes("&"),o.checked=userNameConfig.includes("%"),r.checked=userNameConfig.includes("*"),l.value=cleanNameUser(userNameConfig),NICKNAME.isShowCreateBar(!0),setTimeout(()=>{let e=l.value.length;l.focus(),l.selectionStart=l.selectionEnd=e},100)},isShowCreateBar(e){let t=document.querySelectorAll(".zapme-user-sandbox section")[1];e?(t.style.width="100%",t.style.display="flex"):(t.style.width="0px",t.style.display="none")}},TAGS={DB:null,cachedTags:null,isDataChange:!1,loadAllTagsFromDBInMememory(){let e=TAGS.DB.transaction(["tags"],"readonly").objectStore("tags").openCursor(),t=[];e.onsuccess=function(e){let a=e.target.result;a?(t.push(a.value),a.continue()):(TAGS.cachedTags=t,TAGS.attMemoryTagsPaneSide())}},attMemoryTagsPaneSide(e=!1){if(e)TAGS.loadAllTagsFromDBInMememory();else if("true"!=localStorage.getItem(LOCAL.VIEW_TAG_CONTACT)){let t=document.getElementById("pane-side"),a=t.querySelectorAll('[role="listitem"] [dir="auto"]');a?a.forEach(e=>e.title&&""!=e.title?function e(t){let a=t.title,n=0,s;if(Array.isArray(TAGS.cachedTags)){let o=TAGS.cachedTags.filter(e=>e.NAMES.includes(a));o.forEach(e=>{let o=t.parentElement;s||(s=o.querySelector(`zapme-tag-contact[data-name="${a}"]`))||(t.insertAdjacentHTML("beforebegin",`<zapme-tag-contact data-name="${a}"></zapme-tag-contact>`),s=o.querySelector(`zapme-tag-contact[data-name="${a}"]`));let r=t.parentElement.querySelector(`zapme-tag-contact[data-name="${a}"]`),l=r.querySelector(`[data-id="zapme-tag-${e.ID}"]`);l?l.title=l.textContent=e.DESCRIPTION:r.insertAdjacentHTML("beforeend",`
                    <span 
                        title="${e.DESCRIPTION}" 
                        data-id="zapme-tag-${e.ID}" 
                        style="--zapme-tag-color: ${e.COLOR}">
                        ${e.DESCRIPTION}
                    </span>`),n++});let r=t.parentElement.querySelector(`zapme-tag-contact[data-name="${a}"]`);if(r){let l=r.querySelectorAll("span");l.forEach(e=>{let t=e.getAttribute("data-id"),a=parseInt(t.replace("zapme-tag-","")),n=o.some(e=>e.ID===a);n||e.remove()})}}}(e):null):showMessageTimer("‚ùå N\xe3o encontrou contatos abertos")}else for(let n of document.querySelectorAll("zapme-tag-contact"))n.remove()}},ALERTS={DB:null,ALL_ALERTS:[]},ROBO_TALK={DB:null,ALL_MESSAGES:[],MODAL:null,isTyping:!1,isFinishType:!0,isLog:!1,isListen:!1,qtdeMsgSend:0,OBJ:{isNewMessage:null,msgUserPanel:null,msgBot:null},console(e){ROBO_TALK.isLog&&console.log(e)},setStatus(e){localStorage.setItem(LOCAL.NAME_STORAGE_ROBO,Number(e))},getStatus:()=>localStorage.getItem(LOCAL.NAME_STORAGE_ROBO)?Number(localStorage.getItem(LOCAL.NAME_STORAGE_ROBO)):0,attRoboTalkCache(){let e=ROBO_TALK.DB.transaction("messages","readonly"),t=e.objectStore("messages"),a=t.openCursor();ROBO_TALK.ALL_MESSAGES=[],a.onsuccess=function(e){let t=e.target.result;if(t){let{new_message:a,ignore_case:n,keyword:s,await_msg:o,resp_keyword:r,in_the_middle:l}=t.value;ROBO_TALK.ALL_MESSAGES.push({id:t.key,new_message:a,ignore_case:n,keyword:s,await_msg:o,resp_keyword:r,in_the_middle:l}),t.continue()}ROBO_TALK.loadRoboGrid()}},loadRoboGrid(){if(null!=ROBO_TALK.MODAL){let e=ROBO_TALK.MODAL.querySelector(".zapme-robo-grid");e.innerHTML="",ROBO_TALK.ALL_MESSAGES.forEach((t,a)=>{let n=t.keyword||"";e.insertAdjacentHTML("beforeend",`
                <div>
                    <span>
                        <b>Ignorar M/m:</b> ${t.ignore_case?"S":"N"}<br>
                        <b>Palavra-Chave no meio:</b> ${t.in_the_middle?"S":"N"}<br>
                        <b>Palavra-Chave:</b> ${ROBO_TALK.truncate(t.keyword)}<br>
                        <b title="${t.await_msg}">Frase \xc2ncora:</b> ${""==t.await_msg?"N":`${ROBO_TALK.truncate(t.await_msg)}`}<br>
                        <b>Resposta:</b> ${ROBO_TALK.truncate(t.resp_keyword)}
                    </span>
                    <label title="Excluir" data-item="${t.id}" class="btn-zapme-v2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="#c44b4b" d="M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m0-18C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2m2.59 6L12 10.59L9.41 8L8 9.41L10.59 12L8 14.59L9.41 16L12 13.41L14.59 16L16 14.59L13.41 12L16 9.41z"/></svg>
                    </label>
                </div>
            `),e.querySelector("div:last-of-type > label").addEventListener("click",e=>{e.stopPropagation(),function e(t,a){if(confirm("Deseja excluir a mensagem que representa a palavra-chave: "+a+"?")){let n=ROBO_TALK.DB.transaction("messages","readwrite"),s=n.objectStore("messages"),o=s.delete(t);o.onsuccess=()=>ROBO_TALK.attRoboTalkCache()}}(t.id,n)}),e.querySelector("div:last-of-type").addEventListener("click",e=>alert("A op\xe7\xe3o para editar est\xe1 em desenvolvimento no momento, contamos com sua compreens\xe3o \uD83D\uDE00\uD83D\uDC9A\n\nNeste caso, remova a frase criada clicando no ‚ùå e crie uma nova ajustada."))}),function e(){let t=document.getElementById("_zapme_robo_await_message");t.innerHTML='<option value="">Nenhuma mensagem</option>',ROBO_TALK.ALL_MESSAGES.forEach(e=>{if(e.resp_keyword){let a=document.createElement("option");a.value=e.resp_keyword,a.textContent=`${ROBO_TALK.truncate(e.resp_keyword)}`,a.title=e.resp_keyword,t.appendChild(a)}})}()}},createModalRoboTalk(){let e=`
        <zapme-robo class="zapme-modal-v2">
            <div>
                <header>
                    <span>
                        Rob\xf4 de Respostas [BETA]
                    </span>
                    <span class="btn-zapme-close"></span>
                </header>
                <section>
                    <div class="zapme-robo-grid">
                       ü§ñ Nenhuma resposta criada
                    </div>
                    <div>
                        <div class="zapme-robo-preview">
                            <header> 
                                <span>Rob\xf4 Desligado/Ligado</span>
                                <label class="switch">
                                    <input id="_zapme_robo_change_status" type="checkbox">
                                    <span class="slider"></span>
                                </label>
                            </header>
                        </div>
                        <div class="zapme-robo-configs">
                     
                            <div>
                                <input type="checkbox"  id="_zapme_robo_ignore_case">
                                <label for="_zapme_robo_ignore_case" title="Ativado ignora a formata\xe7\xe3o, ex: Teste, teste e TESTE ser\xe3o a mesma coisa pro rob\xf4.">Ignorar maiusculas e minusculas.</label>
                            </div>

                            <div>
                                <input type="checkbox" id="_zapme_robo_in_the_middle">
                                <label for="_zapme_robo_in_the_middle" title="A palavra chave pode estar em qualquer lugar da frase recebida.">Palavre Chave solta.</label>
                            </div>
                            <div>
                                <span title="Usado em fluxos de op\xe7\xf5es, ex: 1-Financeiro, 2-Suporte... Deixe em branco se n\xe3o for o caso.">Frase \xc2ncora:</span>
                                <select id="_zapme_robo_await_message">
                                </select>
                            </div>
                                <div>
                                <span 
                                title="Palavra que o rob\xf4 vai esperar ser dita, deixar em branco far\xe1 ele responder TODAS mensagens!">Palavra Chave:
                                </span>
                                <input type="text" title="O que o Rob\xf4 deve procurar?" placeholder="Digite aqui..." id="_zapme_robo_keyword">
                            </div>
                            <div>  
                                <textarea text="Mensagem que o rob\xf4 vai dizer!" id="_zapme_robo_resp_keyword" placeholder="Resposta da palavra chave:"></textarea>
                            </div>

                            <span class="btn-zapme-v2 zapme-robo-config-save">Salvar</span>
                        </div>
                        
                        <div class="zapme-yt-videos">
                            <a href="https://youtu.be/Fraw1mrZZQA" target="_blank">Como enviar mensagens.</a>
                            <a href="https://youtu.be/BmuBZB_cNA0" target="_blank">Como usar frases \xe2ncoras.</a>
                        </div>

                    </div>
    
                </section>
            </div>
        </zapme-robo>
       `;document.querySelector("body").insertAdjacentHTML("beforeend",e),ROBO_TALK.MODAL=document.querySelector("zapme-robo");let t=ROBO_TALK.MODAL;async function a(){let e=document.querySelector(`[class="${APP.GREEN_BALL}"]`);if(!e)return!1;{let t=e.parentElement.parentElement.parentElement.querySelector("span > span:last-child"),a={msgUserPanel:t?t.innerText:""};if(!function e(t){let a=!1;for(let n of ROBO_TALK.ALL_MESSAGES){let s=ROBO_TALK.cleanText(t.msgUserPanel),o=ROBO_TALK.cleanText(n.keyword),r=t.isNewMessage==n.new_message||t.isNewMessage,l=r&&(s==o||n.ignore_case&&s.toLowerCase()==o.toLowerCase()),i=r&&!0===n.in_the_middle&&(s.includes(o)||n.ignore_case&&s.toLowerCase().includes(o.toLowerCase())),c=r&&""==n.keyword;if((i||l||c&&""!=s)&&(a=!0,""!=n.keyword))break}return a}(a))return!1;{ROBO_TALK.OBJ.msgUserPanel=a.msgUserPanel,e.tabIndex=-1,e.focus();let n=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,bubbles:!0,cancelable:!0});return e.dispatchEvent(n),!0}}}function n(){let e=document.querySelectorAll("div.message-out span.selectable-text");if(!e)return"";{let t=Array.from(e).at(-1);return t?ROBO_TALK.cleanText(t.innerText):""}}function s(){let e=document.querySelectorAll("div.message-in span.selectable-text");if(!e)return"";{let t=Array.from(e).at(-1);return t?ROBO_TALK.cleanText(t.innerText):""}}function o(){let e=document.querySelectorAll("div.message-in span.selectable-text");return!!e&&1==e.length}ROBO_TALK.attRoboTalkCache(),function e(){let s=t.querySelector(".zapme-robo-config-save");s.addEventListener("click",()=>(function e(){let t={ignore_case:document.getElementById("_zapme_robo_ignore_case").checked,in_the_middle:document.getElementById("_zapme_robo_in_the_middle").checked,keyword:document.getElementById("_zapme_robo_keyword").value,await_msg:document.getElementById("_zapme_robo_await_message").value,resp_keyword:document.getElementById("_zapme_robo_resp_keyword").value},a=!0;if(""==t.keyword.trim()&&(a=confirm("‚ö†Ô∏è Aten\xe7\xe3o!\n\nPalavra chave vazia vai fazer o rob\xf4 responder qualquer mensagem enviada pelo cliente, deseja continuar?")),a){let n=ROBO_TALK.DB.transaction("messages","readwrite"),s=n.objectStore("messages");s.add(t),n.oncomplete=()=>{ROBO_TALK.attRoboTalkCache(),function e(){let t=document.getElementById("_zapme_robo_await_message");document.getElementById("_zapme_robo_in_the_middle").checked=!1,document.getElementById("_zapme_robo_ignore_case").checked=!1,document.getElementById("_zapme_robo_keyword").value="",document.getElementById("_zapme_robo_resp_keyword").value="",t.value="",t.checked=!1,t.removeAttribute("disabled")}()}}})());let o=t.querySelector(".btn-zapme-close");o.addEventListener("click",()=>t.remove());let r=t.querySelector("#_zapme_robo_change_status");r.checked=1==ROBO_TALK.getStatus(),r.addEventListener("click",()=>{pressKeyEsc(),ROBO_TALK.setStatus(r.checked?1:0),function e(){if(!ROBO_TALK.isListen){ROBO_TALK.isListen=!0;let t=setInterval(()=>{1==ROBO_TALK.getStatus()?!ROBO_TALK.isTyping&&ROBO_TALK.isFinishType?(ROBO_TALK.console("Procurando novas mensagens!"),(async()=>{let e=await a();e&&ROBO_TALK.isFinishType&&(ROBO_TALK.isFinishType=!1,setTimeout(()=>(function e(){let t=document.querySelectorAll("div span.selectable-text");if(t.length>0){let a=function e(){let t=ROBO_TALK.OBJ,a="";if(null==ROBO_TALK.OBJ.msgUserPanel)return ROBO_TALK.console("\xc9 NULLO BRO \uD83D\uDC80"),!1;for(let s of ROBO_TALK.ALL_MESSAGES){ROBO_TALK.OBJ.msgBot=t.msgBot=n();let o=e=>ROBO_TALK.cleanText(s.ignore_case?e.toLowerCase():e),r=o(t.msgUserPanel),l=o(s.keyword),i=o(t.msgBot),c=o(s.await_msg),d=i==c,$=i==o(s.resp_keyword),m=r==l||s.ignore_case&&r.toLowerCase()==l.toLowerCase(),_=!0===s.in_the_middle&&(r.includes(l)||s.ignore_case&&r.toLowerCase().includes(l.toLowerCase())),u=_||m,p=u&&d&&""!=c,A=u&&/*!isNovoContato && */ !p&&""!=l&&""==c,E=!u,g=E&&""==s.keyword&&!p&&!$;if(p){a=s.resp_keyword;break}if(A){a=s.resp_keyword;break}g&&(a=s.resp_keyword)}return""!=a&&a}(),s=document.querySelector('[aria-placeholder="Digite uma mensagem"]');if(!1!=a&&s&&!ROBO_TALK.isTyping){ROBO_TALK.isTyping=!0,s.focus();let o=a.split("\n");for(let r=0;r<o.length;r++)if(document.execCommand("insertText",!1,o[r]),r!==o.length-1){let l=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,shiftKey:!0,bubbles:!0,cancelable:!0});s.dispatchEvent(l)}setTimeout(()=>{pressKeyEnter(),ROBO_TALK.isTyping=!1,ROBO_TALK.isFinishType=!0,pressKeyEsc(),ROBO_TALK.console("‚û°Ô∏è Respondeu mensagem!")},200)}else ROBO_TALK.isTyping=!1,ROBO_TALK.isFinishType=!0,pressKeyEsc()}})(),500))})()):(ROBO_TALK.console(ROBO_TALK.OBJ),ROBO_TALK.isFinishType&&ROBO_TALK.console("Acabou de digitar"),ROBO_TALK.isTyping&&ROBO_TALK.console("Robo digitando..."),ROBO_TALK.isTyping||ROBO_TALK.console("n\xc3O  digitando...")):(clearInterval(t),ROBO_TALK.isListen=!1)},1e3)}}()})}()},cleanText:e=>e.replace(/[^\p{L}\p{N}\s\r\n.,;:!?-]/gu,"").replace(/\s+/g," ").replace(/\s*(?=\n)/g,"").replace(/(\s*;)(?=\S)/g,"$1 ").trim(),truncate:e=>e.length>10?e.substring(0,20)+"...":e},CONFIGS={DB:null,saveConfig(e,t){let a=CONFIGS.DB.transaction(["configs"],"readwrite").objectStore("configs"),n=a.index("KEY").getKey(e);n.onsuccess=function(){if(n.result){let s=a.get(n.result);s.onsuccess=function(){let e=s.result;e.VALUE=t,a.put(e)}}else a.add({KEY:e,VALUE:t})}},getConfig(e,t){try{let a=CONFIGS.DB.transaction(["configs"],"readonly").objectStore("configs").index("KEY").get(e);a.onsuccess=function(){a.result?t(a.result.VALUE):t(null)}}catch(n){console_zapme("Ops..."+n.message)}},startConfigDB(){let e=indexedDB.open("zapme-config-all",1);e.onupgradeneeded=function(e){CONFIGS.DB=e.target.result;let t=CONFIGS.DB.createObjectStore("configs",{keyPath:"ID",autoIncrement:!0});t.createIndex("KEY","KEY",{unique:!0}),t.createIndex("VALUE","VALUE",{unique:!1})},e.onsuccess=function(e){CONFIGS.DB=e.target.result,startNewBD()}}},USER={ID:null,LICENSE:null,IS_ROBO_TALK:localStorage.getItem("ZAPME_IS_ROBO_TALK")||"0",IS_PRO:!0,IS_PRO_30:!1,BACKUP_ANO:null,MES_1:null,SELECTED:{NAME:null,PHONE:null},IS_MODAL_AD_OPEN:!1,generateIdUser(){localStorage.getItem(LOCAL.ID_USER)||localStorage.setItem(LOCAL.ID_USER,Date.now()),USER.ID=localStorage.getItem(LOCAL.ID_USER)},setIdUser(e){localStorage.setItem(LOCAL.ID_USER,e),USER.ID=e}},AD={isAdReloadClosed:!1,isQrCodeOpen:!1,randomClasseNumber:randomClass("zapme-rd-"),antCheatPopUpReload(e){if(e){let t=setInterval(()=>{let e=document.querySelector(".zapme-ad-reload");if(e){clearInterval(t);let a=e.getBoundingClientRect();(a.height<=0||a.width<=0)&&AD.alertAdBlock()}else e||AD.isAdReloadClosed?AD.isAdReloadClosed&&clearInterval(t):(clearInterval(t),AD.alertAdBlock())},5e3)}},antCheatBanner(e){if(e){let t=setInterval(()=>{let e=document.querySelector(".zapme-ad"),a=document.getElementById("zp-img-ad");if(!e||!a){clearInterval(t),AD.alertAdBlock();return}let n=e.getBoundingClientRect(),s=a.getBoundingClientRect(),o=n.width<=0||n.height<=0,r=s.width<=5||s.height<=5;if(o||r){clearInterval(t),AD.alertAdBlock();return}clearInterval(t)},2e3)}},alertAdBlock(){alert("‚ö†Ô∏è Bloqueador de an\xfancios detectado. Desative para continuar!"),sendLogs(getInfoLogin("‚ö†Ô∏è AD BLOCK DETECTADO!")),setInterval(()=>window.location.reload(),1e3)},createAD(){!function e(){let t=LINK.ADS;fetch(`${t}/file.json`,{method:"GET"}).then(e=>e.json()).then(e=>(function e(t){let a=t.isProMes,n=Number(t.MAIN),s=t.ALL[n],o=t.isAntCheatON,r=setInterval(()=>{if(document.getElementById("side")){clearInterval(r),USER.IS_MODAL_AD_OPEN||(USER.IS_MODAL_AD_OPEN=!0,a?createModalProMonth():function e(t){let a=`
                <zapme-modal-ad class="zapme-ad-reload "">
                <div class="${AD.randomClasseNumber}">
                    <a class="${AD.randomClasseNumber}" href="${t.LINK}" target="_blank">
                    <img class="${AD.randomClasseNumber}" src="${t.IMG}">
                    </a>
                    <div class="${AD.randomClasseNumber}">
                        <button class="btn-zapme-v1">Fechar</button>
                        <button class="btn-zapme-v1">N\xe3o exibir an\xfancios</button>
                    </div>
                </div>
                </zapme-modal-ad>
                `;document.querySelector("body").insertAdjacentHTML("beforebegin",a);let[n,s]=document.querySelectorAll("zapme-modal-ad button");n.addEventListener("click",()=>{AD.isAdReloadClosed=!0,document.querySelector("zapme-modal-ad").remove(),t.REDIRECT&&window.open(t.LINK,"_blank")}),t.REDIRECT&&(n.innerText="Fechar e abrir an\xfancio."),s.addEventListener("click",()=>window.open(LINK.PLANOS,"_blank"))}(s),AD.antCheatPopUpReload(o));let e=`
                    <div class="zapme-ad ${AD.randomClasseNumber}"> 
                        <span class="${AD.randomClasseNumber}">
                            <a class="${AD.randomClasseNumber}" id="zp-link-ad" target="_blank" href="${s.LINK}">
                                <img id="zp-img-ad" src="${s.IMG}">
                            </a>
                        </span>
                    <a class="${AD.randomClasseNumber}" id="zapme-no-ad"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 20 20"><path fill="red" d="M2.93 17.07A10 10 0 1 1 17.07 2.93A10 10 0 0 1 2.93 17.07m1.41-1.41A8 8 0 1 0 15.66 4.34A8 8 0 0 0 4.34 15.66m9.9-8.49L11.41 10l2.83 2.83l-1.41 1.41L10 11.41l-2.83 2.83l-1.41-1.41L8.59 10L5.76 7.17l1.41-1.41L10 8.59l2.83-2.83z"/></svg></a>
                    </div>`;(function e(t){let a=document.getElementById("side");a&&(a.insertAdjacentHTML("beforebegin",t),document.getElementById("zapme-no-ad").addEventListener("click",()=>insertLicenseUser()))})(e),AD.antCheatBanner(o)}},1e3)})(e)).catch(e=>console_zapme("Erro:",e))}()}},BACKGROUND={console_back(e){console.log(e)},getLicensePro30(){chrome.runtime.sendMessage({type:"loadInfoPro30"},e=>{let t=e.licenca_30;if(t){let a=calcDays(timeStampToDate(Date.now()),timeStampToDate(t));a>30&&BACKGROUND.addLicensePro30(null),USER.MES_1=a}else localStorage.setItem(LOCAL.IS_30_PRO,!1),noProPlan()})},addLicensePro30(e=null){null==e?localStorage.setItem(LOCAL.IS_30_PRO,!1):localStorage.removeItem(LOCAL.IS_30_PRO),chrome.runtime.sendMessage({type:"saveInfoPro30",timestamp:e},e=>{e?.status==="ok"&&window.location.reload()})},getPlanoAnual(){chrome.runtime.sendMessage({type:"loadPlanoAnual"},e=>{let t=e.licenca_ano;if(t){let a=atob(t);USER.LICENSE=a.slice(-13),USER.ID=a.slice(0,13),USER.BACKUP_ANO=t}})},addPlanoAnual(e=null){chrome.runtime.sendMessage({type:"savePlanoAnual",timestamp:e},e=>{e?.status==="ok"&&BACKGROUND.getPlanoAnual()})}},TRANSFER={isMUTATOR_ON:!1,NAME_GROUP:"zapme-atendimentos",ACTUAL_USER_NAME:null,checkTicketOnReload(){if(localStorage.getItem(LOCAL.LAST_TICKET_TF)){let e=document.querySelector(`[title="${TRANSFER.NAME_GROUP}"]`);if(e&&1==document.querySelector(`[title="${TRANSFER.NAME_GROUP}"]`).parentElement.parentElement.nextElementSibling.querySelector(`.${APP.GREEN_BALL}:last-child`).classList.length){let t=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,bubbles:!0,cancelable:!0});e.dispatchEvent(t)}}},getTicket(e){let t=e.match(/ticket:([a-zA-Z0-9]+)/);return t&&t[1]?t[1].replace():null},generateIdTransfer:()=>Date.now().toString(36),createModalTransfer(){let e=`
                <zapme-transfer class="zapme-modal-v2">
                    <div>
                        <header>
                            <span clas>Transferir Conversa</span>
                            <span class="btn-zapme-close"></span>
                        </header>
                        <div>
                            <span>Nenhuma conversa selecionada!</span>
                        </div>
                        <section>
                        </section>
                        <textarea placeholder="Observa\xe7\xf5es internas:"></textarea>
                        <div style="display: none; visibility: hidden;" class="alert-cli" title="Em desenvolvimento">
                            <input disabled type="checkbox">
                            <label for="">üîî Notificar Cliente</label>
                        </div>
                    </div>
                </zapme-transfer>`;if(!localStorage.getItem(LOCAL.IS_TRANSFER))return alert("\uD83C\uDF89 Novidade exclusiva chegando: Transfer\xeancia de Conversas!\n\nEm breve, voc\xea poder\xe1 transferir conversas entre atendentes com facilidade. Compat\xedvel com o mesmo n\xfamero e/ou n\xfameros diferentes, perfeito para agilizar o atendimento em equipe!\n\nUsu\xe1rios PRO podem solicitar acesso antecipado para testes. \uD83D\uDE09");if(null==USER.SELECTED.NAME||!document.querySelector("#main"))return showMessageTimer("\uD83D\uDD14 Nenhuma conversa selecionada!","Por favor, selecione uma conversa para transferir.");if(NICKNAME.ALL_NAMES.length<=1)return showMessageTimer("\uD83D\uDD14 N\xe3o h\xe1 atendentes!","Registre no M\xf3dulo [Nome Personalizado] os nomes dos atendentes.");document.querySelector("body").insertAdjacentHTML("beforeend",e);let t=document.querySelector("zapme-transfer"),a=t.querySelector(".btn-zapme-close");a.addEventListener("click",()=>t.remove());let n=t.querySelector("textarea");n.focus();let s=document.querySelector('[data-icon="close-refreshed"]');s&&s.click(),function e(){let a=t.querySelector(".alert-cli > label");a.textContent="\uD83D\uDD14 Notificar "+USER.SELECTED.NAME;let s=t.querySelector("div > span");s.innerHTML=`Contato: <strong>${USER.SELECTED.NAME}</strong>`;let o=t.querySelector("section");o.innerHTML="";let r=TRANSFER.generateIdTransfer();NICKNAME.ALL_NAMES.forEach(e=>{!1==e.ACTIVE&&(t.querySelector("section").insertAdjacentHTML("beforeend",`
                        <div>
                            <span>${cleanNameUser(e.NICK)}</span>
                            <button>Transferir</button>
                        </div>`),o.lastChild.querySelector("button").addEventListener("click",()=>(function e(a,s){let o=document.querySelector(`[title="${TRANSFER.NAME_GROUP}"]`);if(!o)return alert(`‚ö†Ô∏è Grupo:  ${TRANSFER.NAME_GROUP} n\xe3o encontrado!

Crie um grupo com o nome ${TRANSFER.NAME_GROUP} para registrar e transferir conversas.`);if(!NICKNAME.ACTIVE_NICK)return showMessageTimer("\uD83D\uDE16 N\xe3o encontramos seu nome.","Voc\xea precisa de um nome personalizado em uso para transferir conversas.");t.remove();let r=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,bubbles:!0,cancelable:!0});o.focus(),o.dispatchEvent(r),setTimeout(()=>{if(KEYBOARD){let e=null==USER.SELECTED.PHONE||String(USER.SELECTED.PHONE).length>14?"`(n\xe3o encontrado)`":USER.SELECTED.PHONE,t=""!=n.value.trim()?n.value.trim():"Sem Observa\xe7\xf5es",o=`> Conversa transferida

De: *${cleanNameUser(NICKNAME.ACTIVE_NICK)}*
Para: *${cleanNameUser(s.NICK)}*
Contato: *${USER.SELECTED.NAME}*
N\xfamero: *${e}*

_${t}_
\`ticket:`+a+"`.";KEYBOARD.focus();let r=o.split("\n");for(let l=0;l<r.length;l++)if(document.execCommand("insertText",!1,r[l]),l!==r.length-1){let i=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,shiftKey:!0,bubbles:!0,cancelable:!0});KEYBOARD.dispatchEvent(i)}setTimeout(()=>{pressKeyEnter(!1),showMessageTimer("\uD83D\uDD04Ô∏è Conversa Transferida!",`Para: ${cleanNameUser(s.NICK)}`)},50)}else showMessageTimer("‚ùå Conversa n\xe3o encontrada!","Por favor, selecione uma conversa para transferir.")},500)})(r,e)))})}()},startMutatorTransfer(){if(!localStorage.getItem(LOCAL.IS_TRANSFER)||TRANSFER.isMUTATOR_ON||NICKNAME.ALL_NAMES.length<1||!TRANSFER.ACTUAL_USER_NAME||!document.querySelector(`[title="${TRANSFER.NAME_GROUP}"]`))return;let e=document.querySelector(`[title="${TRANSFER.NAME_GROUP}"]`).parentElement.parentElement.parentElement;!function e(t,a){if(!t)return;let n=new MutationObserver(e=>a(e));return n.observe(t,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),n}(e,t=>{if(e){let a=`Para: ${cleanNameUser(TRANSFER.ACTUAL_USER_NAME)}`,n=e.textContent,s=localStorage.getItem(LOCAL.LAST_TICKET_TF),o=TRANSFER.getTicket(n);o&&s!=o&&(localStorage.setItem(LOCAL.LAST_TICKET_TF,o),n.includes("Conversa transferida")&&n.includes(a)&&TRANSFER.ACTUAL_USER_NAME&&""!=TRANSFER.ACTUAL_USER_NAME&&function e(){let t={title:"",text:"\uD83D\uDD04 Nova conversa transferida para voc\xea!"};setTimeout(()=>alert(t.text),500)}())}else showMessageTimer("\uD83D\uDE41 Grupo n\xe3o encontrado!")}),TRANSFER.isMUTATOR_ON=!0,setTimeout(()=>TRANSFER.checkTicketOnReload(),500)}};function injetaFontes(){let e=chrome.runtime.getURL("assets/fonts/inter-v19-latin-regular.woff2"),t=document.createElement("style");t.textContent=`
  @font-face {
    font-family: "Inter";
    src: url("${e}") format("woff2");
    font-weight: 400;
    font-style: normal;
  }
`,document.head.appendChild(t)}messageWhenReload(),USER.generateIdUser(),CONFIGS.startConfigDB(),injetaFontes();const loadBody=setInterval(()=>{if(document.getElementById("side")&&document.getElementById("pane-side"))try{function e(){let e=`<zapme-navbar class="${AD.randomClasseNumber}">
                    <zapme-show title="Exibir/Ocultar Zapme">
                    <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 24 24"><path fill="white" d="M12.6 12L8 7.4L9.4 6l6 6l-6 6L8 16.6z"/></svg>
                    </zapme-show>
                    <span  title="Nome Personalizado">
                       <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><g fill="none" stroke="#008069" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" color="#008069"><path d="M12.521 3H11.52a33 33 0 0 0-1.674.067c-4.191.278-7.53 3.658-7.805 7.902a20 20 0 0 0 0 2.52c.1 1.546.785 2.976 1.591 4.185c.468.846.16 1.901-.328 2.823c-.352.665-.527.998-.386 1.238c.14.24.456.248 1.086.263c1.247.03 2.088-.322 2.755-.814c.379-.278.568-.417.698-.433s.388.09.9.3c.462.19.998.307 1.49.34c1.426.094 2.92.094 4.35 0C18.216 21.123 21.501 18 22 14"/><path d="M15.59 8.648c-.629.369-2.277 1.121-1.273 2.063c.49.46 1.037.789 1.723.789h3.92c.686 0 1.233-.329 1.723-.789c1.004-.942-.644-1.694-1.273-2.063a4.8 4.8 0 0 0-4.82 0M20 4a2 2 0 1 1-4 0a2 2 0 0 1 4 0M8.5 15h7m-7-5h2"/></g></svg>
                    </span>
                    <span title="Plano de Fundo"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 16 16"><path fill="#008069" d="m5.122.282l-.348 1.071A2.2 2.2 0 0 1 3.376 2.75l-1.072.348l-.022.006a.423.423 0 0 0 0 .798l1.072.348a2.2 2.2 0 0 1 1.399 1.397l.348 1.07a.423.423 0 0 0 .798 0l.348-1.07a2.2 2.2 0 0 1 1.399-1.403l1.072-.348a.423.423 0 0 0 0-.798L7.646 2.75a2.2 2.2 0 0 1-1.377-1.397L5.92.283a.423.423 0 0 0-.799 0M.217 8.213l.766-.248a1.58 1.58 0 0 0 .998-.999l.25-.764a.302.302 0 0 1 .57 0l.248.764a1.58 1.58 0 0 0 .984.999l.765.248a.302.302 0 0 1 0 .57l-.765.249a1.58 1.58 0 0 0-1 1.002l-.248.764a.302.302 0 0 1-.57 0l-.249-.764a1.58 1.58 0 0 0-.999-.999l-.765-.248a.302.302 0 0 1 0-.57zM3 11.901v.599A2.5 2.5 0 0 0 5.5 15h7a2.5 2.5 0 0 0 2.5-2.5v-7A2.5 2.5 0 0 0 12.5 3H9.912q.087.235.088.496q0 .266-.091.504h2.59a1.5 1.5 0 0 1 1.5 1.5v7c0 .232-.053.45-.146.647L10.2 9.495a1.7 1.7 0 0 0-2.404 0l-3.652 3.652A1.5 1.5 0 0 1 4 12.5v-2.19l-.015.037l-.26.802c-.1.25-.26.46-.48.62a1.3 1.3 0 0 1-.245.132m8.498-4.397a1.002 1.002 0 1 0 0-2.004a1.002 1.002 0 0 0 0 2.004m-2.003 2.698l3.652 3.652A1.5 1.5 0 0 1 12.5 14h-7c-.232 0-.45-.053-.647-.146l3.652-3.652a.7.7 0 0 1 .99 0"/></svg></span>
                    <span title="Frases R\xe1pidas"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path fill="#008069" d="m20.34 9.32l-14-7a3 3 0 0 0-4.08 3.9l2.4 5.37a1.06 1.06 0 0 1 0 .82l-2.4 5.37A3 3 0 0 0 5 22a3.14 3.14 0 0 0 1.35-.32l14-7a3 3 0 0 0 0-5.36Zm-.89 3.57l-14 7a1 1 0 0 1-1.35-1.3l2.39-5.37a2 2 0 0 0 .08-.22h6.89a1 1 0 0 0 0-2H6.57a2 2 0 0 0-.08-.22L4.1 5.41a1 1 0 0 1 1.35-1.3l14 7a1 1 0 0 1 0 1.78"/></svg></span>
                    <span title="Etiquetas para Nomes"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path fill="none" stroke="#008069" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.796 2.913a3.12 3.12 0 0 1 2.36-.91l5.603.277a3.12 3.12 0 0 1 2.96 2.961l.277 5.604a3.12 3.12 0 0 1-.91 2.359l-7.578 7.578a4.16 4.16 0 0 1-5.88 0l-4.41-4.41a4.16 4.16 0 0 1 0-5.88zM17.5 6.5h-.009m-4.509 5.706L10 14m0 0l-2.98 1.794M10 14l.019 3.5M10 14l-.018-3.5M10 14l3 1.706M10 14l-3-1.707" color="#008069"/></svg></span>
                    <span title="Agendar Alertas"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path fill="#008069" fill-rule="evenodd" d="M17.297 6.572c-.41 0-.75-.34-.75-.75V4.598c-.774-.026-1.683-.026-2.75-.026h-2c-1.068 0-1.976 0-2.75.026v1.224c0 .41-.34.75-.75.75s-.75-.34-.75-.75V4.706c-.945.123-1.594.36-2.05.816c-.602.602-.822 1.54-.903 3.05H21c-.081-1.51-.302-2.448-.903-3.05c-.456-.456-1.105-.693-2.05-.816v1.116c0 .41-.34.75-.75.75m3.744 3.5q.008.793.006 1.75v1c0 .41.34.75.75.75s.75-.34.75-.75v-1c0-3.98 0-5.97-1.39-7.36c-.772-.772-1.73-1.115-3.11-1.268v-.872c0-.41-.34-.75-.75-.75s-.75.34-.75.75v.775c-.796-.025-1.705-.025-2.75-.025h-2c-1.046 0-1.954 0-2.75.025v-.775c0-.41-.34-.75-.75-.75s-.75.34-.75.75v.872c-1.38.153-2.338.496-3.11 1.268c-1.39 1.39-1.39 3.39-1.39 7.36v2c0 3.98 0 5.97 1.39 7.36s3.38 1.39 7.36 1.39c.41 0 .75-.34.75-.75s-.34-.75-.75-.75c-3.56 0-5.35 0-6.3-.95s-.95-2.74-.95-6.3v-2q-.001-.956.005-1.75zm-3.244 13c-2.62 0-4.75-2.13-4.75-4.75s2.13-4.75 4.75-4.75s4.75 2.13 4.75 4.75s-2.13 4.75-4.75 4.75m0-8c-1.79 0-3.25 1.46-3.25 3.25s1.46 3.25 3.25 3.25s3.25-1.46 3.25-3.25s-1.46-3.25-3.25-3.25m.47 4.78c.15.15.34.22.53.22s.38-.07.53-.22c.29-.29.29-.77 0-1.06l-.78-.78v-1.69c0-.41-.34-.75-.75-.75s-.75.34-.75.75v2c0 .2.08.39.22.53z" color="#008069"/></svg></span>
                    
                    <span class="beta-zm" title="Rob\xf4 de Respostas"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 32 32"><path fill="#008069" d="M17 3a1 1 0 1 0-2 0v1h-4.75A3.25 3.25 0 0 0 7 7.25v5.5A3.25 3.25 0 0 0 10.25 16h11.5A3.25 3.25 0 0 0 25 12.75v-5.5A3.25 3.25 0 0 0 21.75 4H17zM9 7.25C9 6.56 9.56 6 10.25 6h11.5c.69 0 1.25.56 1.25 1.25v5.5c0 .69-.56 1.25-1.25 1.25h-11.5C9.56 14 9 13.44 9 12.75zm-2 15c0-.69.56-1.25 1.25-1.25h15.5c.69 0 1.25.56 1.25 1.25v.45c0 1.43-.68 2.707-2.122 3.668C21.406 27.348 19.121 28 16 28s-5.406-.652-6.878-1.632C7.68 25.408 7 24.13 7 22.7zM8.25 19A3.25 3.25 0 0 0 5 22.25v.45c0 2.17 1.077 4.043 3.013 5.332C9.92 29.302 12.634 30 16 30s6.08-.698 7.987-1.968C25.923 26.742 27 24.871 27 22.7v-.45A3.25 3.25 0 0 0 23.75 19zm6-9a1.75 1.75 0 1 1-3.5 0a1.75 1.75 0 0 1 3.5 0m5.25 1.75a1.75 1.75 0 1 0 0-3.5a1.75 1.75 0 0 0 0 3.5"/></svg></span>
                    
                    <span title="Modo Privado"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path fill="#008069" d="M12 19.5c-5 0-9.3-3.1-11-7.5c1.7-4.4 6-7.5 11-7.5s9.3 3.1 11 7.5c-.1.4-.3.7-.5 1.1c-.5-1.2-1.5-2.2-2.8-2.7C17.9 8 15.1 6.5 12 6.5c-3.8 0-7.2 2.1-8.8 5.5c1.7 3.4 5.1 5.5 8.8 5.5h.1c-.1.2-.1.5-.1.7zM12 9c-1.7 0-3 1.3-3 3s1.3 3 3 3q.6 0 1.2-.3v-.2c0-1.3.7-2.5 1.7-3.4C14.5 9.9 13.4 9 12 9m8.8 8h-4.3v-2.5c0-.8.7-1.3 1.5-1.3s1.5.5 1.5 1.3v.5h1.3v-.5c0-1.4-1.4-2.5-2.8-2.5s-2.8 1.1-2.8 2.5V17c-.6 0-1.2.6-1.2 1.2v3.5c0 .7.6 1.3 1.2 1.3h5.5c.7 0 1.3-.6 1.3-1.2v-3.5c0-.7-.6-1.3-1.2-1.3"/></svg></span>           
                    

                    <span title="Nova Conversa">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path fill="#008069" d="M14 15.5V14H4.254a2.25 2.25 0 0 0-2.25 2.249v.578c0 .892.32 1.756.9 2.435c1.565 1.834 3.952 2.74 7.097 2.74q2.267 0 4-.63v-1.62c-1.081.498-2.41.75-4 .75c-2.738 0-4.704-.747-5.957-2.214a2.25 2.25 0 0 1-.54-1.462v-.577a.75.75 0 0 1 .75-.75zM10 2.005a5 5 0 1 1 0 10a5 5 0 0 1 0-10m0 1.5a3.5 3.5 0 1 0 0 7a3.5 3.5 0 0 0 0-7M21.255 10c.966 0 1.75.784 1.75 1.75v9.5a1.75 1.75 0 0 1-1.75 1.75H16.75A1.75 1.75 0 0 1 15 21.25v-9.5c0-.966.783-1.75 1.75-1.75zm-2.002 8.997h-.5l-.102.007a.75.75 0 0 0 .102 1.493h.5l.102-.007a.75.75 0 0 0-.102-1.493"/></svg>
                    </span>    

                    <span class="new-zm" title="Transferir Conversa">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><g fill="none" stroke="#008069" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M11.101 1.488H4.83a1 1 0 0 0-1 1v6.614m9.069 13.41h6.272a1 1 0 0 0 1-1v-6.614"/><path d="m1.23 6.5l2.6 2.6l2.601-2.6m16.339 11l-2.6-2.6l-2.601 2.6"/><path stroke-miterlimit="10" d="M5.505 18.546a2.551 2.551 0 1 0 0-5.103a2.551 2.551 0 0 0 0 5.103m4.277 3.965c-.559-1.83-2.29-3.202-4.276-3.202c-1.988 0-3.718 1.372-4.277 3.202m17.264-15.92a2.551 2.551 0 1 0 0-5.103a2.551 2.551 0 0 0 0 5.103m4.277 3.965c-.559-1.83-2.289-3.202-4.276-3.202s-3.718 1.372-4.276 3.202"/></g></svg>
                    </span>    

                    <span title="Zapme Suporte"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path fill="none" stroke="#008069" stroke-width="1.5" d="m4 11.5l-.485.121A2 2 0 0 0 2 13.561v1.877a2 2 0 0 0 1.515 1.94l1.74.435A.6.6 0 0 0 6 17.231v-5.463a.6.6 0 0 0-.746-.582zm0 0V11a8 8 0 1 1 16 0v.5m0 0l.485.121A2 2 0 0 1 22 13.561v1.877a2 2 0 0 1-1.515 1.94L20 17.5m0-6l-1.255-.314a.6.6 0 0 0-.745.582v5.463a.6.6 0 0 0 .745.582L20 17.5m-5 3h3a2 2 0 0 0 2-2v-1m-5 3a1.5 1.5 0 0 0-1.5-1.5h-3a1.5 1.5 0 0 0 0 3h3a1.5 1.5 0 0 0 1.5-1.5Z"/></svg></span>

                    <span class="pro-zm" title="Zapme Pro"></span>
                    </zapme-navbar>`;document.querySelector("body").insertAdjacentHTML("afterbegin",e),document.querySelector("zapme-show").addEventListener("click",()=>isHideBar(localStorage.getItem(LOCAL_HIDE_NAVBAR))),mapButtons()}function t(){if(localStorage.getItem(LOCAL_HIDE_NAVBAR)){let e=0==localStorage.getItem(LOCAL_HIDE_NAVBAR)?1:0;isHideBar(e)}else localStorage.setItem(LOCAL_HIDE_NAVBAR,1),isHideBar(1)}function a(){localStorage.getItem(LOCAL.ACTUAL_VERSION)||(isHideBar(1),localStorage.setItem(LOCAL.ACTUAL_VERSION,!0))}function n(){let e={lyt:`
                <zapme-phrasebar>
                    <div draggable="true" title="Mover Frase R\xe1pidas"></div>
                    <button title="Nova Frase R\xe1pida"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><g fill="white" fill-rule="evenodd" clip-rule="evenodd"><path d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12m10-8a8 8 0 1 0 0 16a8 8 0 0 0 0-16"/><path d="M13 7a1 1 0 1 0-2 0v4H7a1 1 0 1 0 0 2h4v4a1 1 0 1 0 2 0v-4h4a1 1 0 1 0 0-2h-4z"/></g></svg></button>
                </zapme-phrasebar>`};document.querySelector("body").insertAdjacentHTML("afterbegin",e.lyt),document.querySelector("zapme-phrasebar > button").addEventListener("click",()=>{let e=prompt("‚ö° Frases R\xe1pidas ‚ö°\n\nCom apenas um clique voc\xea envia frases personalizadas. Mantenha as frases salvas e economize seu tempo respondendo seus contatos.\n\n\uD83D\uDE4B‚Äç‚ôÇÔ∏èD\xfavidas? Acione o suporte '\uD83C\uDFA7' na barra lateral;\n‚ùå Use o bot\xe3o direito do mouse para excluir uma frase da lista;\n\nInforme sua frase r\xe1pida: (Ex: Bom dia, tudo bem?)");if(null!=e&&""!=e){let t=JSON.parse(localStorage.getItem("PHRASES"));t.push(e),localStorage.setItem("PHRASES",JSON.stringify(t)),loadPhrases()}}),localStorage.getItem("PHRASE_BAR")||localStorage.setItem("PHRASE_BAR","false");let t=document.querySelector("zapme-phrasebar");if(localStorage.getItem("PHRASE_BAR_XY")){let a=localStorage.getItem("PHRASE_BAR_XY").split("&");t.style.left=a[0],t.style.top=a[1]}t.addEventListener("dragend",e=>{let a=e.clientX,n=e.clientY;if(n>0){t.style.left=`${-100+a}px`,t.style.top=`${n}px`;let s=t.style.left+"&"+t.style.top;localStorage.setItem("PHRASE_BAR_XY",s)}else showMessageTimer("‚ùå Opss","Posi\xe7\xe3o inv\xe1lida!")}),loadPhrases()}function s(){let e=document.querySelectorAll(".selectable-text")[0].parentElement;if(e){e.addEventListener("blur",()=>TAGS.attMemoryTagsPaneSide()),e.addEventListener("keypress",()=>TAGS.attMemoryTagsPaneSide());let t=new MutationObserver(e=>{e.forEach(e=>{"attributes"===e.type&&TAGS.attMemoryTagsPaneSide()})});t.observe(e,{attributes:!0})}}function o(){document.addEventListener("keydown",function(e){if(e.altKey&&e.key>="0"&&e.key<="9"){let t=document.querySelector("zapme-fast-name");if(t){e.preventDefault();let a=e.key,n=document.querySelectorAll("zapme-fast-name > span")[a-1];n?n.click():showMessageTimer("Sem Registro!","Nenhum registro cadastrado na posi\xe7\xe3o: "+a)}}})}function r(){let e=indexedDB.open("zapme-nickname",2);e.onupgradeneeded=function(e){NICKNAME.DB=e.target.result;let t=NICKNAME.DB.createObjectStore("nicknames",{keyPath:"ID",autoIncrement:!0});t.createIndex("NAME","NAME",{unique:!1}),t.createIndex("NICK","NICK",{unique:!1}),t.createIndex("ACTIVE","ACTIVE",{unique:!1})},e.onsuccess=function(e){NICKNAME.DB=e.target.result,NICKNAME.loadAllNicknamesFromDBInMemory()}}function l(){let e=indexedDB.open("zapme-tag",1);e.onupgradeneeded=function(e){TAGS.DB=e.target.result;let t=TAGS.DB.createObjectStore("tags",{keyPath:"ID",autoIncrement:!0});t.createIndex("DESCRIPTION","DESCRIPTION",{unique:!1}),t.createIndex("COLOR","COLOR",{unique:!1}),t.createIndex("NAMES","NAMES",{unique:!1})},e.onsuccess=function(e){TAGS.DB=e.target.result,TAGS.loadAllTagsFromDBInMememory(),document.getElementById("pane-side").addEventListener("scroll",e=>TAGS.attMemoryTagsPaneSide())}}function i(){let e=indexedDB.open("zapme-alert",1);e.onupgradeneeded=function(e){ALERTS.DB=e.target.result;let t=ALERTS.DB.createObjectStore("alerts",{keyPath:"id",autoIncrement:!0});t.createIndex("hora","hora",{unique:!1})},e.onsuccess=function(e){ALERTS.DB=e.target.result,function e(){let t=ALERTS.DB.transaction("alerts","readonly"),a=t.objectStore("alerts"),n=a.openCursor();ALERTS.ALL_ALERTS=[],n.onsuccess=function(e){let t=e.target.result;if(t){let{descricao:a,hora:n,dia:s}=t.value;ALERTS.ALL_ALERTS.push({id:t.key,descricao:a,hora:n,dia:s}),t.continue()}}}(),setInterval(()=>{let e=new Date,t=e.toTimeString().slice(0,5),a=e.toLocaleDateString("pt-BR");ALERTS.ALL_ALERTS.forEach(({descricao:e,hora:n,dia:s},o)=>{(o<2||USER.IS_PRO)&&n===t&&(""===s||s===a)&&alert(`üìÖ Zapme para WhatsApp informa!
Voc\xea tem um alerta agendado!

Assunto: ${e}
Dia: ${""==s?"Todos":s}
Hora: ${n}`)})},6e4)}}function c(){let e=indexedDB.open("zapme-robo-talk",1);e.onupgradeneeded=function(e){ROBO_TALK.DB=e.target.result,ROBO_TALK.DB.createObjectStore("messages",{keyPath:"id",autoIncrement:!0})},e.onsuccess=function(e){ROBO_TALK.DB=e.target.result,ROBO_TALK.attRoboTalkCache()}}e(),t(),a(),n(),openPhraseBar(!1),s(),o(),checkPrivateMode(!1),r(),l(),i(),c(),document.getElementById("pane-side").addEventListener("click",e=>getContactClicked()),document.querySelector("body").addEventListener("click",e=>{if(document.querySelector("body")){let t=setInterval(()=>{isCHAT_OPEN?(clearInterval(t),isCHAT_OPEN=!1):activateToChat()},50)}})}catch(d){console.error(d.message),sendLogs(getInfoLogin("‚ö†Ô∏è ERRO: "+d.message)),alert("Opss... Encontramos um problema \uD83D\uDE22","Um erro foi encontrado e a extens\xe3o n\xe3o foi iniciada corretamente.\n\nCaso desejar, entre em contato com o suporte: 55 51 99116-9870")}finally{clearInterval(loadBody)}},1500);function randomClass(e){return e+""+Math.floor(1e5*Math.random())}function startNewBD(){CONFIGS.getConfig("date",function(e){null!=e?CONFIGS.getConfig("user",function(t){CONFIGS.getConfig("license",function(a){if(a&&t){USER.setIdUser(t);let n=calcDays(timeStampToDate(Date.now()),timeStampToDate(e));n>0&&function e(t,a){let n=`${LINK.MS_PRO}/valid?license=${t}&user=${a}`;fetch(n,{method:"GET"}).then(e=>{if(200!=e.status)throw Error("Network response was not ok");return e.json()}).then(e=>{"OK"==e.status?(CONFIGS.saveConfig("date",Date.now()),BACKGROUND.addPlanoAnual(get64Anual(t,a))):(showMessageTimer("‚ö†Ô∏è Aten\xe7\xe3o!",e.msg),CONFIGS.saveConfig("date",null),BACKGROUND.getLicensePro30(),sendLogs(getInfoLogin(`üíî ${e.status}: ${e.msg}`)))}).catch(e=>{let t=`üòñ Erro ao validar licen\xe7a!`;sendLogs(getInfoLogin(t+"\n"+e.message))})}(a,t)}else checkAnotherPlan()})}):checkAnotherPlan()})}function checkAnotherPlan(){null==localStorage.getItem(LOCAL.IS_30_PRO)?BACKGROUND.getLicensePro30():noProPlan()}function messageWhenReload(){fetch(`${LINK.MSG}/file.json`,{method:"GET"}).then(e=>e.json()).then(e=>{"OK"==e.status&&showMessageTimer(e.title,e.message,e?.link)}).catch(e=>console_zapme("Erro Reload:",e))}function deleteIndexedBD(e){e&&(indexedDB.deleteDatabase("zapme-tag"),indexedDB.deleteDatabase("zapme-alert"),indexedDB.deleteDatabase("zapme-config-all"),indexedDB.deleteDatabase("zapme-config"))}function calcDays(e,t){let a=new Date(e),n=new Date(t);return Math.floor((a-n)/864e5)}function activateToChat(){let e=document.querySelectorAll('div[contenteditable="true"]')[1],t=e?e.ariaPlaceholder:null;null!=t&&["Digite uma mensagem","Type a message","Escrever mensagem","Escribe un mensaje"].includes(t)&&(KEYBOARD=e,activeNameUser(),activeWallpaper(),addFastSwitchName(),console_zapme("chegou active to chat"),isCHAT_OPEN=!0)}async function getPhraseDay(){fetch("https://bot-sm.vercel.app/wzmsg",{method:"GET"}).then(e=>e.json()).then(e=>{document.querySelector(".zm-feedback")&&("OK"==e.RETORNO&&(document.querySelector(".zm-feedback > h1").innerHTML=e.TITLE,document.querySelector(".zm-feedback > h3").innerHTML=e.MSG),document.querySelector(".zm-feedback > label").innerHTML=e.OBS,document.querySelector(".zm-tuto").innerHTML=e.TUTO)}).catch(e=>{console_zapme("Erro:",e)})}function loadPhrases(){if(localStorage.getItem("PHRASES")){let e=JSON.parse(localStorage.getItem("PHRASES"));document.querySelector("zapme-phrasebar>div").textContent="‚ö°Crie frases r\xe1pidas ->",e.length>0&&(document.querySelector("zapme-phrasebar>div").textContent="",e.forEach(e=>{document.querySelector("zapme-phrasebar>div").insertAdjacentHTML("afterbegin",`<span title="${e}">${e}</span>`)}),mapAllPhrases())}else localStorage.setItem("PHRASES",JSON.stringify([]))}function mapAllPhrases(){document.querySelectorAll("zapme-phrasebar span").forEach((e,t)=>{e.addEventListener("click",()=>{let t=KEYBOARD;if(document.querySelector("header h1")){let a=document.querySelector("header h1").textContent;("Settings"==a||"Configura\xe7\xf5es"==a)&&(t=document.querySelectorAll('div[contenteditable="true"]')[2])}if(t){t.focus();let n=e.textContent,s=document.querySelectorAll("header")[3].querySelector("span");s&&(n.includes("@nome_1")?n=n.replaceAll("@nome_1",s.textContent.split(" ")[0]):n.includes("@nome")&&(n=n.replaceAll("@nome",s.textContent))),n.replaceAll("<br>","\n");let o=NICKNAME.ACTIVE_NAME;""!=o&&null!=o?o.includes("!")?(document.execCommand("insertText",!1,o.replace("!","")),pressKeyEnter(!0),document.execCommand("insertText",!1,n)):document.execCommand("insertText",!1,o+" "+n):document.execCommand("insertText",!1,n),setTimeout(()=>pressKeyEnter(!1),250)}else showMessageTimer("‚ùå Opss...","Nenhuma conversa aberta!")}),e.addEventListener("contextmenu",function(a){if(confirm("Deseja remover a frase:\n"+e.title+" ?")){a.preventDefault();let n=JSON.parse(localStorage.getItem("PHRASES")),s=n.length-1-t;n.splice(s,1),localStorage.setItem("PHRASES",JSON.stringify(n)),loadPhrases(),showMessageTimer("\uD83D\uDDD1Ô∏è Removido",`${e.title} foi removido.`)}})})}function openPhraseBar(e){let t=document.querySelector("zapme-phrasebar"),a="PHRASE_BAR",n=localStorage.getItem(a);e&&(n="true"==n?"false":"true",localStorage.setItem(a,n)),"true"==n?(t.style.visibility="visible",t.style.display="flex"):(t.style.visibility="hidden",t.style.display="none")}function isHideBar(e){let t=document.querySelector("zapme-navbar"),a=document.querySelector("zapme-show");0==Number(e)?(t.style.translate="65px 0px",a.style.rotate="180deg"):(t.style.translate="0px 0px",a.style.rotate="360deg"),e=0==e?1:0,localStorage.setItem(LOCAL_HIDE_NAVBAR,e)}function activeWallpaper(){if(localStorage.getItem(LOCAL.LOCAL_WALLPAPER)&&document.getElementById("main")){let e=document.getElementById("main"),t=localStorage.getItem(LOCAL.LOCAL_WALLPAPER);e.style.background=`url(${t})`,e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",e.style.backgroundSize="cover",e.childNodes[0].style.visibility=""!=t&&null!=t&&"null"!=t?"hidden":"visible"}}function activeNameUser(){let e=KEYBOARD;e&&e.addEventListener("keydown",t=>{if(document.querySelector("header h1")){let a=document.querySelector("header h1").textContent;"Settings"==a&&document.querySelector('[aria-label="Conversations"]').click(),"Configura\xe7\xf5es"==a&&document.querySelector('[aria-label="Conversas"]').click()}if(e.querySelector("p")){let n=e.querySelector("p").textContent,s=NICKNAME.ACTIVE_NAME;if(null!=s&&"null"!=s){s=s.replace("!","");let o=t.altKey&&t.key>="0"&&t.key<="9";["CapsLock","Meta","Alt","Escape","Control","Enter","Backspace"].includes(t.key)||n.includes(s)||o||(document.execCommand("insertText",!1,s+" "),String(NICKNAME.ACTIVE_NICK).includes("!")&&!n.includes(s)&&pressKeyEnter(!0))}}})}function getInfoLogin(e=""){let t=NICKNAME.ACTIVE_NAME;return`${ICON_VERSION} | ${t=null!=t&&""!=t?t:"NO_USER"} | ${USER.ID} | L:${USER.LICENSE} | P:${USER.IS_PRO} | P30: ${USER.IS_PRO_30} ${e}`}function openWhatsApp(e){let t=document.createElement("a");t.href=`https://web.whatsapp.com/send?phone=555191169870&text=${e}`,t.click()}function checkPrivateMode(e){localStorage.getItem(LOCAL.PRIVATE_MODE)||localStorage.setItem(LOCAL.PRIVATE_MODE,0);let t=document.getElementById("pane-side"),a=localStorage.getItem(LOCAL.PRIVATE_MODE);if(e){let n=1==Number(a)?0:1;localStorage.setItem(LOCAL.PRIVATE_MODE,n),showMessageTimer(1==n?"\uD83D\uDFE2 Modo Privado: Ligado":"\uD83D\uDFE1 Modo Privado: Desligado","Em: Lista de Contatos")}let s=localStorage.getItem(LOCAL.PRIVATE_MODE);t.style.filter=1==Number(s)?"blur(8px)":"blur(0px)"}function mapButtons(){let[e,t,a,n,s,o,r,l,i,c,d]=document.querySelectorAll("zapme-navbar>span");e.addEventListener("click",()=>startSandBox()),t.addEventListener("click",()=>(function e(){let t=KEYBOARD;t?function e(){if(confirm("Deseja trocar o plano de fundo?\n\nOK - Escolher imagem;\nCancelar - Remover Imagem;")){document.querySelector("body").insertAdjacentHTML("afterbegin",'<input type="file" id="fileInput" accept="image/*">');let t=document.getElementById("fileInput");t.style.visibility="hidden",t.addEventListener("change",function(e){let t=e.target.files[0];if(t){let a=new FileReader;a.onload=function(e){localStorage.setItem(LOCAL.LOCAL_WALLPAPER,e.target.result),activeWallpaper(),showMessageTimer("‚úÖ Novo Wallpaper definido!")},a.readAsDataURL(t)}}),t.click(),t.remove()}else if(document.getElementById("main")){let a=document.getElementById("main");a.style.background="",a.childNodes[0].style.visibility="visible",localStorage.setItem(LOCAL.LOCAL_WALLPAPER,""),activeWallpaper(),showMessageTimer("\uD83D\uDDD1Ô∏è Wallpaper Removido!")}}():showMessageTimer("‚ùå Opss...","Nenhuma conversa aberta!")})()),a.addEventListener("click",()=>openPhraseBar(!0)),n.addEventListener("click",()=>(function e(){let t=!1;if(["Archived","Archivados","Arquivadas"].forEach(e=>{document.querySelector(`[title="${e}"]`)&&(t=!0)}),t&&showMessageTimer("‚ö†Ô∏è Etiquetas incompat\xedveis","Atualmente as Etiquetas por Nome n\xe3o s\xe3o compat\xedveis em contatos Arquivados."),null!=USER.SELECTED.NAME&&document.querySelector("#main")){let a=`
            <zapme-tag-contact-window>
            <div class="zapme-screens-tag">
            
                <div class="header-tag">
                    <span>Etiquetas para Nomes</span>
                    ${SVG.CLOSE}
                </div>

                   <div class="zapme-tag-option">
                    <input title="Oculta etiquetas na lista de conversas." type="checkbox" id="zapme_active_flag">Ocultar Etiquetas.
                    </div>

                <div class="zapme-screen-tag-opts">
                    <span class="btn-zapme-v1 selected"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 32 32"><g fill="none"><path stroke="grey" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m10 19l5.5-5.5M13 22l2.5-2.5M4.414 16.586l11-11A2 2 0 0 1 16.828 5H25a2 2 0 0 1 2 2v8.172a2 2 0 0 1-.586 1.414l-11 11a2 2 0 0 1-2.828 0l-8.172-8.172a2 2 0 0 1 0-2.828"/><path fill="silver" d="M23 10a1 1 0 1 1-2 0a1 1 0 0 1 2 0"/></g></svg>Etiquetas</span>
                    <span class="btn-zapme-v1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 48 48"><g fill="none" stroke="grey" stroke-linejoin="round" stroke-width="4"><path d="M21 38c9.389 0 17-7.611 17-17S30.389 4 21 4S4 11.611 4 21s7.611 17 17 17Z"/><path stroke-linecap="round" d="M26.657 14.343A7.98 7.98 0 0 0 21 12a7.98 7.98 0 0 0-5.657 2.343m17.879 18.879l8.485 8.485"/></g></svg>Pesquisar</span>
                </div>

                <div class="zapme-screen-tag zapme-screen-tag-tags zapme-screen-tag-visible">
                    <section class="zampe-tag-section">
                        <div class="zampe-tag-list">
                        </div>
                    </section>
                    <div class="zapme-tag-edition">
                        <input id="zapme-tag-contact-description" type="text" placeholder="Descri\xe7\xe3o Etiqueta...">
                        <input id="zapme-tag-contact-color" title="Cor da Etiqueta" type="color" value="#4500e6">
                        <button>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 12 12"><path fill="white" d="M6 1.75a.75.75 0 0 1 .75.75v2.75H9.5a.75.75 0 0 1 0 1.5H6.75V9.5a.75.75 0 0 1-1.5 0V6.75H2.5a.75.75 0 0 1 0-1.5h2.75V2.5A.75.75 0 0 1 6 1.75" stroke-width="0.5" stroke="white"/></svg>
                        </button>
                    </div>
                 

                </div>

                <div class="zapme-screen-tag zapme-screen-tag-search" >
                    <div class="zapme-search-all-tags">
                    </div>

                    <div class="zapme-name-with-tag">
                    </div>
                </div>
            
                </div>
        </zapme-tag-contact-window>
        `;function n(){document.querySelector("zapme-tag-contact-window").remove()}function s(){let e=document.querySelector(".zampe-tag-list");if(e){let t=1;e.innerHTML="",TAGS.DB.transaction(["tags"],"readonly").objectStore("tags").openCursor().onsuccess=({target:{result:a}})=>{if(a){if(t<4||USER.IS_PRO){let n=a.value.NAMES.includes(USER.SELECTED.NAME);e.insertAdjacentHTML("beforeend",`
                                        <span data-name="${a.value.DESCRIPTION}" data-id="${a.value.ID}" class="zapme-tag-used-${n}" style="--zapme-tag-color: ${a.value.COLOR}">${a.value.DESCRIPTION}
                                            <label class="btn-zapme-v1" title="Editar">Editar</label>
                                        </span>`),t++}a.continue()}else document.querySelectorAll(".zampe-tag-list span").forEach(e=>{let t=e.dataset.id,a=e.dataset.name;e.addEventListener("click",()=>{o(t,USER.SELECTED.NAME),s(),TAGS.attMemoryTagsPaneSide(!0)});let n=e.querySelector("label");n&&n.addEventListener("click",n=>{var o,r;n.stopPropagation();let l=prompt("Informe o nome atualizado da etiqueta:\n\nObs: para remover a etiqueta digite: DEL\nEm breve: Mudar a cor da etiqueta;",e.dataset.name),i;""!=l&&null!=l&&("DEL"!=l?(o=t,r=l,i=TAGS.DB.transaction(["tags"],"readwrite").objectStore("tags"),i.get(Number(o)).onsuccess=({target:{result:e}})=>{if(!e)return showMessageTimer("‚ùå Erro","Etiqueta n\xe3o encontrada.");e.DESCRIPTION=r,i.put(e).onsuccess=()=>{s(),TAGS.attMemoryTagsPaneSide(!0),showMessageTimer("‚úÖ Etiqueta atualizada")}}):function e(t,a){if(confirm("‚ö†Ô∏è AVISO!!!!\nDeseja deletar a etiqueta: "+a+"?\n\nIsso ir\xe1 remover a etiqueta de TODOS os contatos que est\xe3o usando.")){let n=TAGS.DB.transaction(["tags"],"readwrite").objectStore("tags");n.get(Number(t)).onsuccess=({target:{result:e}})=>{if(!e)return showMessageTimer("‚ùå Erro","Etiqueta n\xe3o encontrada.");n.delete(Number(t)).onsuccess=()=>{for(let e of(s(),TAGS.attMemoryTagsPaneSide(!0),showMessageTimer("\uD83D\uDDD1Ô∏è Etiqueta removida"),document.querySelectorAll(`[data-id="zapme-tag-${t}"]`)))e.remove()}}}}(t,a))})})}}}function o(e,t){let a=TAGS.DB.transaction(["tags"],"readwrite").objectStore("tags");a.get(Number(e)).onsuccess=function(n){let s=n.target.result;if(!s)return showMessageTimer("‚ùå Erro","Etiqueta n\xe3o encontrada.");s.NAMES=Array.isArray(s.NAMES)?s.NAMES:[];let o=s.NAMES.indexOf(t);if(-1!==o){s.NAMES.splice(o,1);let r=document.querySelector(`[data-name="${t}"]`);r&&r.querySelector(`[data-id="zapme-tag-${Number(e)}"]`).remove(),a.put(s).onsuccess=()=>showMessageTimer("\uD83C\uDFF7Ô∏è Etiqueta desvinculada")}else s.NAMES.push(t),a.put(s).onsuccess=()=>showMessageTimer("\uD83C\uDFF7Ô∏è Etiqueta vinculada")}}document.querySelector("body").insertAdjacentHTML("afterbegin",a),function e(){let t=document.getElementById("zapme-tag-contact-description"),a=document.getElementById("zapme-tag-contact-color"),r=document.querySelector("zapme-tag-contact-window .header-tag");r.addEventListener("click",()=>n());let l=document.querySelector("zapme-tag-contact-window button");l.addEventListener("click",()=>{(function e(t,a,n){if(""!=t&&null!=t&&null!=n){let s=TAGS.DB.transaction(["tags"],"readwrite").objectStore("tags"),r=s.count();r.onsuccess=function(){r.result<3||USER.IS_PRO?s.add({DESCRIPTION:t,COLOR:a,NAMES:n}).onsuccess=e=>{document.getElementById("zapme-tag-contact-description").value="",o(e.target.result,n),showMessageTimer("‚úÖ Etiqueta criada")}:confirm("Assine o PRO para criar Etiquetas sem limites!")&&window.open(LINK.PLANOS,"_blank")}}else showMessageTimer("‚ùå Etiqueta inv\xe1lida!","Informe um nome v\xe1lido para a etiqueta.")})(t.value,a.value,USER.SELECTED.NAME),s(),TAGS.attMemoryTagsPaneSide(!0)});let i=document.getElementById("zapme_active_flag");i.addEventListener("change",e=>{localStorage.setItem(LOCAL.VIEW_TAG_CONTACT,e.target.checked),TAGS.attMemoryTagsPaneSide(!0)}),i.checked=Boolean(localStorage.getItem(LOCAL.VIEW_TAG_CONTACT)&&"true"==localStorage.getItem(LOCAL.VIEW_TAG_CONTACT))}(),function e(){let t=document.querySelectorAll(".zapme-screen-tag-opts > span");t.forEach((e,t)=>{e.addEventListener("click",()=>{let a=document.querySelector(".zapme-screen-tag-opts > span.selected");a&&a.classList.remove("selected"),e.classList.add("selected");let s=document.querySelector(".zapme-screen-tag-visible");s&&s.classList.remove("zapme-screen-tag-visible");let r=document.querySelectorAll(".zapme-screen-tag");r[t].classList.add("zapme-screen-tag-visible"),1==t&&function e(){let t=document.querySelector(".zapme-search-all-tags"),a=document.querySelector(".zapme-name-with-tag"),s=TAGS.DB.transaction(["tags"],"readonly"),r=s.objectStore("tags"),l=r.openCursor();t&&(t.textContent=""),a&&(a.textContent=""),l.onsuccess=({target:{result:e}})=>{if(e){let{DESCRIPTION:s,COLOR:r,ID:l,NAMES:i}=e.value;t.insertAdjacentHTML("beforeend",`
                            <span>
                                <label style="background-color: ${r};"></label>
                                ${s}
                            </span>`);let c=t.lastElementChild;c?.addEventListener("click",()=>{let e=t.querySelector(".selected");e&&e.classList.remove("selected"),c.classList.add("selected"),a.textContent="",i.forEach(e=>{a?.insertAdjacentHTML("beforeend",`
                                    <span>
                                        ${e} 
                                        <label>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 512 512"><path fill="#d31e1e" d="m289.94 256l95-95A24 24 0 0 0 351 127l-95 95l-95-95a24 24 0 0 0-34 34l95 95l-95 95a24 24 0 1 0 34 34l95-95l95 95a24 24 0 0 0 34-34Z" stroke-width="13" stroke="#d31e1e"/></svg>
                                        </label>
                                    </span>`);let t=document.querySelector(".zapme-name-with-tag span:last-child label");t.addEventListener("click",()=>{confirm("Deseja desvincular a etiqueta de: "+e)&&(o(l,e),TAGS.attMemoryTagsPaneSide(!0),n())})})}),e.continue()}}}()})})}(),s()}else showMessageTimer("‚ö†Ô∏è Conversa n\xe3o encontrada!","Nenhuma conversa aberta ou iniciada.")})()),s.addEventListener("click",()=>(function e(){let t=`
         <zapme-notify class="zapme-modal-v1">
            <div>
                <header>
                    <span clas>Agendar Alertas</span>
                    <span class="btn-zapme-close"></span>
                </header>
                <section>
                </section>
                <label>Dica: N\xe3o preencha a data para o alerta repetir todos os dias.</label>
                <section>
                    <input type="text" placeholder="Ex: Avisar o cliente X" id="zapme_notify_text">
                    <input type="time" id="zapme_notify_time">
                    <input type="text" id="zapme_notify_date" placeholder="DD/MM/AAAA" value=""/>
                    <button class="btn-zapme-v2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 12.485l4.243 4.243l8.484-8.485M3 12.485l4.243 4.243m8.485-8.485L12.5 11.5"/></svg>
                        Salvar
                    </button>
                </section>
            </div>
        </zapme-notify>
        
        `;document.querySelector("body").insertAdjacentHTML("beforeend",t);let[a,n,s]=document.querySelectorAll("zapme-notify input"),o=document.querySelector("zapme-notify .btn-zapme-close"),r=document.querySelector("zapme-notify button"),l=document.querySelector("zapme-notify");function i(){let e=ALERTS.DB.transaction("alerts","readonly"),t=e.objectStore("alerts"),a=t.openCursor();ALERTS.ALL_ALERTS=[],a.onsuccess=function(e){let t=e.target.result;if(t){let{descricao:a,hora:n,dia:s}=t.value;ALERTS.ALL_ALERTS.push({id:t.key,descricao:a,hora:n,dia:s}),t.continue()}else c()}}function c(){let e=document.querySelector("zapme-notify section");e.innerHTML="",ALERTS.ALL_ALERTS.forEach((t,a)=>{if(a<2||USER.IS_PRO){let n=""==t.dia?"Todos os dias":"Dia "+t.dia;e.insertAdjacentHTML("beforeend",`
                <div>
                    <span>${n} \xe0s ${t.hora} <br> ${t.descricao}</span>
                    <label title="Excluir" data-item="${t.id}" class="btn-zapme-v2"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 512 512"><path fill="#d31e1e" d="m289.94 256l95-95A24 24 0 0 0 351 127l-95 95l-95-95a24 24 0 0 0-34 34l95 95l-95 95a24 24 0 1 0 34 34l95-95l95 95a24 24 0 0 0 34-34Z" stroke-width="13" stroke="#d31e1e"/></svg>
                    </label>
                </div>
                `),e.querySelector("div:last-of-type > label").addEventListener("click",()=>(function e(t,a){if(confirm("Deseja excluir o alerta: "+a)){let n=ALERTS.DB.transaction("alerts","readwrite"),s=n.objectStore("alerts"),o=s.delete(t);o.onsuccess=()=>i()}})(t.id,t.descricao))}})}s.addEventListener("input",function(e){let t=e.target.value.replace(/\D/g,"");t.length>=3&&t.length<=4?t=t.slice(0,2)+"/"+t.slice(2):t.length>=5&&(t=t.slice(0,2)+"/"+t.slice(2,4)+"/"+t.slice(4,8)),e.target.value=t}),o.addEventListener("click",()=>l.remove()),r.addEventListener("click",()=>{let e=String(a.value.trim()),t=String(n.value.trim()),o=function e(t){let a=t.trim(),n=a.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(!n)return"";let s=parseInt(n[1],10),o=parseInt(n[2],10)-1,r=parseInt(n[3],10),l=new Date(r,o,s),i=l.getFullYear()===r&&l.getMonth()===o&&l.getDate()===s;return i?a:""}(s.value);e.length>0&&t.length>0?function e(t){if(ALERTS.ALL_ALERTS.length<2||USER.IS_PRO){let o=ALERTS.DB.transaction("alerts","readwrite"),r=o.objectStore("alerts");r.add(t);let l=""!=t.dia?t.dia:"Todos os dias";o.oncomplete=()=>{i(),showMessageTimer("‚úÖ Alerta criado!",`${l} \xe0s ${t.hora}`),a.value="",n.value="",s.value=""}}else confirm("Assine o PRO para criar alertas sem limites!")&&window.open(LINK.PLANOS,"_blank")}({descricao:e,hora:t,dia:o}):showMessageTimer("‚ùå Campos n\xe3o preenchidos!","Descri\xe7\xe3o e hora do alerta s\xe3o obrigat\xf3rios.")}),c()})()),o.addEventListener("click",()=>{let e;return e=`ü§ñüéâ Rob\xf4 100% personalizado para sua empresa!

‚ö†Ô∏è Algumas informa\xe7\xf5es importantes:
‚ÑπÔ∏è A extens\xe3o precisa permanecer aberta para que o rob\xf4 funcione.
‚ÑπÔ∏è O m\xf3dulo est\xe1 em fase de testes(BETA), ent\xe3o pode apresentar instabilidades.
‚ÑπÔ∏è Durante esse per\xedodo, o uso \xe9 totalmente gratuito, sem nenhum custo.
‚ÑπÔ∏è Se encontrar algum comportamento estranho, fique \xe0 vontade para relatar ‚Äî isso nos ajuda a melhorar!

Deseja iniciar o uso do Rob\xf4 de Respostas?`,void(1!=USER.IS_ROBO_TALK?confirm(e)&&(localStorage.setItem("ZAPME_IS_ROBO_TALK",1),window.location.reload()):ROBO_TALK.createModalRoboTalk())}),r.addEventListener("click",()=>checkPrivateMode(!0)),l.addEventListener("click",()=>(function e(){let t=prompt(`Veja como iniciar conversas para contatos n\xe3o salvos!

    ‚úÖ Formato 1: 00 00 0000 0000;
    ‚úÖ Formato 2: 00 0000 0000;
    ‚úÖ Formato 3: 0000 0000;
    ‚ÑπÔ∏è N\xe3o informe o 9 adicional;
    ‚ÑπÔ∏è Ex: 51 9116 9870;
`);if(null!=t){let a=t.replaceAll(" ","").replaceAll("+","").replaceAll("-","").trim();if(a){let n=document.createElement("a");n.href=`https://web.whatsapp.com/send?phone=${t}`,n.click()}else showMessageTimer("‚ùå N\xfamero Inv\xe1lido!")}})()),i.addEventListener("click",()=>TRANSFER.createModalTransfer()),c.addEventListener("click",()=>(function e(){let t=prompt("Envie sua pegunta ou sugest\xe3o:\n\nObs: para ler nossos Termos de Uso, digite TERMOS");if(""!=t&&null!=t&&"null"!=t){if(["MYUSER","ASSETS","LICENSE","COMANDO","DELETEALLBD","TERMOS","ZAPME_ALERT_NO_AD","BACKUP","MYBACKUP","MYV","VALIDAR_ZAPME_30","MY_BKP_ANO","LIMPAR_ZAPME_PRO30","DAYS","BKP_PRO","ACTIVE_TF_ON"].includes(t.toUpperCase().trim(),0))switch(t.toUpperCase()){case"ACTIVE_TF_ON":localStorage.setItem(LOCAL.IS_TRANSFER,!0),window.location.reload();break;case"BKP_PRO":(function e(){let t=prompt("Informe seu c\xf3digo de recupera\xe7\xe3o [Plano PRO]");if(null!=t){let a=`${LINK.MS_PRO}/backup?newUser=${USER.ID}&backup=${t}`;fetch(a,{method:"GET"}).then(e=>{if(200!=e.status)throw Error("Network response was not ok");return e.json()}).then(e=>{if("OK"==e.status){showMessageTimer("Aguarde...","A p\xe1gina vai ser reiniciada sozinha!"),CONFIGS.saveConfig("license",null),CONFIGS.saveConfig("user",null),CONFIGS.saveConfig("date",null);let t=e.license,a=get64Anual(t,USER.ID),n=Date.now();CONFIGS.saveConfig("license",t),CONFIGS.saveConfig("user",USER.ID),CONFIGS.saveConfig("date",n);let s=setInterval(()=>{CONFIGS.getConfig("date",function(e){CONFIGS.getConfig("user",function(t){CONFIGS.getConfig("license",function(n){null!=e&&null!=t&&null!=n&&(clearInterval(s),prompt("‚ö†Ô∏è Aten\xe7\xe3o! Anote e salve seu NOVO c\xf3digo de recupera\xe7\xe3o, ele pode ser usado na perca da licen\xe7a.\n\nC\xf3digo de Recupera\xe7\xe3o:",a),window.location.reload())})})})},500)}else alert(e.status+"\n\n"+e.msg)})}else showMessageTimer(" ‚ùå Erro","Nenhum c\xf3digo informado!")})();break;case"DAYS":alert(null==USER.MES_1?"VENCIDO":`${USER.MES_1} dias de uso!`);break;case"MY_BKP_ANO":null!=USER.BACKUP_ANO?prompt("Copie e Salve seu c\xf3digo de BACKUP:",USER.BACKUP_ANO):showMessageTimer("‚ùå Sem Backup!","Nenhum backup foi encontrado.");break;case"VALIDAR_ZAPME_30":let a=prompt("Informe seu c\xf3digo de pagamento:");null!=a&&mpPayment(a);break;case"LIMPAR_ZAPME_PRO30":sendLogs(getInfoLogin("\uD83D\uDE16 Usu\xe1rio limpou licen\xe7a mensal!")),BACKGROUND.addLicensePro30(null);break;case"ZAPME_ALERT_NO_AD":localStorage.setItem("ZAPME_ALERT_NO_AD",!0),window.location.reload();break;case"TERMOS":sendLogs(getInfoLogin("\uD83D\uDE48 ABRIU TERMOS!")),window.open(chrome.runtime.getURL("assets/pages/termos/index.html"),"_blank");break;case"DELETEALLBD":confirm("Deseja deletar todos os banco de dados locais?")&&(deleteIndexedBD(!0),window.location.reload());break;case"MYUSER":sendLogs(getInfoLogin("\uD83E\uDDD1‚Äç\uD83D\uDE80 Visualizou c\xf3digo do usu\xe1rio!")),alert(USER.ID);break;case"ASSETS":alert(LINK.EXTENSION_ASSETS);break;case"LICENSE":insertLicenseUser();break;case"MYBACKUP":CONFIGS.getConfig("license",function(e){e?CONFIGS.getConfig("user",function(t){t?alert("\uD83D\uDD75Ô∏è Seu c\xf3digo de backup: "+btoa(`${t}${Math.floor(10*Math.random())}${e}`)):showMessageTimer("‚ùå Sem usu\xe1rio vinculados!")}):showMessageTimer("‚ùå Sem licen\xe7a vinculada!")});break;case"BACKUP":CONFIGS.getConfig("license",function(e){if(e){let t=prompt(`Restaurando Licen\xe7a: ${e}

Informe seu c\xf3digo de backup`);if(t&&""!=t&&t.length>20){let a=atob(t),n=a.slice(-13),s=a.slice(0,13);(async()=>{e==n?CONFIGS.getConfig("user",function(e){null!=e&&(CONFIGS.saveConfig("date",Date.now()),alert("‚úÖ Backup realizado com sucesso!\n\nPor favor, recaregar a p\xe1gina!"))}):alert("Ops... Um erro ocorreu, talvez o dispositivo n\xe3o seja esse!\n\nU:"+s+" | L:"+n+" | u:"+s)})()}else showMessageTimer("‚ùå Backup Inv\xe1lido")}else{let o=prompt("Licen\xe7a n\xe3o encontrada para recuperar, caso tenha, informe a sua licen\xe7a abaixo:");""!=o&&null!=o&&CONFIGS.saveConfig("license",o)}});break;case"COMANDO":let n=atob(prompt("C\xf3digo do comando para executar:")),s=prompt("Informe o valor do comando:");null!=s&&("&"!=s?localStorage.setItem(String(n),s):localStorage.removeItem(n),sendLogs(getInfoLogin("‚å®Ô∏è Comando executado: "+n+" | "+s)),window.location.reload());break;case"MYV":alert(`üíö Sua vers\xe3o Zapme: ${ICON_VERSION}`)}else{let o=document.createElement("a");o.href=`https://web.whatsapp.com/send?phone=555191169870&text=${t}`,o.click()}}})()),d.addEventListener("click",()=>window.open(LINK.PLANOS,"_blank")),ROBO_TALK.setStatus(0)}function startSandBox(){let e;e=`
            <div class="zapme-user-sandbox zapme-modal-v2">
            <div>
                <div>
                   <header>
                        <span clas>Nome Personalizado</span>
                        <a href="${LINK.YT.NOME_SANDBOX}" target="a_blank">Assistir Tutorial!</a>
                        <span class="btn-zapme-close"></span>
                    </header>
                    <div class="zapme-config-sandbox">
                        <input type="checkbox" name="" id="zapme_fast_access">Exibe acesso r\xe1pido + atalho teclado.
                    </div>
                </div>
                <main>
                    <section>
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 16 16">
                                <path fill="white"
                                    d="M8 15c-3.86 0-7-3.14-7-7s3.14-7 7-7s7 3.14 7 7s-3.14 7-7 7M8 2C4.69 2 2 4.69 2 8s2.69 6 6 6s6-2.69 6-6s-2.69-6-6-6" />
                                <path fill="white"
                                    d="M8 11.5c-.28 0-.5-.22-.5-.5V5c0-.28.22-.5.5-.5s.5.22.5.5v6c0 .28-.22.5-.5.5" />
                                <path fill="white"
                                    d="M11 8.5H5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h6c.28 0 .5.22.5.5s-.22.5-.5.5" />
                            </svg>
                            <span>Novo</span>
                        </div>    
                    </section>
    
                    <section>
                        <input 
                        id="zapme-user-name-sandbox"
                        type="text"
                        placeholder="Nome do atendente"
                        autocomplete="off" 
                        autocorrect="off" 
                        autocapitalize="off" 
                        spellcheck="false">
    
                        <div id="zapme-checkbox-sandbox">
                            <input type="checkbox" name="" id="">Quebra de linha
                            <input type="checkbox" name="" id="">Negrito
                            <input type="checkbox" name="" id="">It\xe1lico
                            <input type="checkbox" name="" id="">Moldura
                        </div>
    
                        <div class="zapme-user-sb-btns">
                            <button>Remover</button>
                            <button>Usar</button>
                            <button>Salvar</button>
                        </div>
    
                    </section>
                </main>
            
            </div>
            </div>`,document.querySelector("body").insertAdjacentHTML("afterbegin",e);let t=document.querySelector(".zapme-user-sandbox"),[a,n,s,o]=document.querySelectorAll("#zapme-checkbox-sandbox > input"),r=document.getElementById("zapme-user-name-sandbox"),[l,i,c]=document.querySelectorAll(".zapme-user-sb-btns > button");i.addEventListener("click",()=>{let e=NICKNAME.ALL_NAMES[NICKNAME.USER_AUX_INDEX].NICK;e==NICKNAME.ACTIVE_NICK?(e="",NICKNAME.setActive(-1)):NICKNAME.setActive(NICKNAME.USER_AUX_INDEX)}),l.addEventListener("click",()=>{NICKNAME.ALL_NAMES[NICKNAME.USER_AUX_INDEX]&&confirm(`Deseja remover o registro: ${cleanNameUser(NICKNAME.ALL_NAMES[NICKNAME.USER_AUX_INDEX].NICK)}?`)&&NICKNAME.delete(NICKNAME.USER_AUX_INDEX),NICKNAME.isShowCreateBar(!1)}),c.addEventListener("click",()=>{let e=String(r.value).trim();""!=e&&"null"!=e?(function e(t){t=t.trim(),t=(a.checked?"!":"")+t,t=(n.checked?"&":"")+t,t=(s.checked?"%":"")+t,t=(o.checked?"*":"")+t;let r=NICKNAME.USER_AUX_INDEX;-1==r?(NICKNAME.insert(convertNameUser(t),t,!1),showMessageTimer("‚úÖ Registro criado!","Clique em usar para ativar o registro criado.")):NICKNAME.edit(r,convertNameUser(t),t)}(e),NICKNAME.attUserModal(),showMessageTimer("‚úÖ Sucesso!","O nome foi salvo.")):showMessageTimer("‚ùå Opss...","Nenhum nome informado!")}),document.querySelector(".btn-zapme-close").addEventListener("click",()=>t.remove());let d=document.getElementById("zapme_fast_access");d.checked="1"==localStorage.getItem(LOCAL.LOCAL_NAME_FAST_ACCESS),d.addEventListener("click",()=>{d.checked&&showMessageTimer("‚ÑπÔ∏è Atalho Habilitado!","Use o atalho 'alt + n\xfamero do registro' para trocar de atendente durante uma conversa."),1==localStorage.getItem(LOCAL.LOCAL_NAME_FAST_ACCESS)?localStorage.setItem(LOCAL.LOCAL_NAME_FAST_ACCESS,0):localStorage.setItem(LOCAL.LOCAL_NAME_FAST_ACCESS,1)}),NICKNAME.attUserModal()}function cleanNameUser(e){return e.replace("!","").replace("&","").replace("%","").replace("*","")}function convertNameUser(e){return e.includes("*")&&(e="`"+(e=e.replace("*",""))+"`"),e.includes("&")&&(e="*"+(e=e.replace("&",""))+"*"),e.includes("%")&&(e="_"+(e=e.replace("%",""))+"_"),e}function timeStampToDate(e){if(null==e)return null;{let t=new Date(parseInt(e));return t.setHours(t.getHours()-3),t.toISOString().split("T")[0]}}function console_zapme(e){}function pressKeyEnter(e=!1){let t=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,shiftKey:e,bubbles:!0,cancelable:!0});document.activeElement.dispatchEvent(t)}function pressKeyEsc(){let e=new KeyboardEvent("keydown",{key:"Escape",code:"Escape",keyCode:27,bubbles:!0,cancelable:!0});document.activeElement.dispatchEvent(e)}function addFastSwitchName(){if(document.querySelector("zapme-fast-name")&&document.querySelector("zapme-fast-name").remove(),1==localStorage.getItem(LOCAL.LOCAL_NAME_FAST_ACCESS)){let e=document.querySelector("footer");e&&(e.insertAdjacentHTML("beforebegin","<zapme-fast-name></zapme-fast-name>"),function e(){let t=document.querySelector("zapme-fast-name"),a=NICKNAME.ALL_NAMES;a.forEach(e=>{if("null"!=e.NICK){let a=Boolean(e.NICK==NICKNAME.ACTIVE_NICK);t.insertAdjacentHTML("beforeend",`<span title="${e.NICK}" class="zapme-fast-selected-${a}">${cleanNameUser(e.NICK)}</span>`)}}),t.querySelectorAll("span").forEach((e,t)=>{e.addEventListener("click",e=>{e.preventDefault(),null==KEYBOARD.querySelector("p > span")?(NICKNAME.USER_INDEX!=t?NICKNAME.setActive(t):NICKNAME.setActive(-1),setTimeout(()=>{let e=KEYBOARD;e&&e.focus()},200)):showMessageTimer("\uD83E\uDD72 Quase l\xe1!","Para trocar de nome, o campo da mensagem precisa estar vazio.")})})}())}}function getContactClicked(){USER.SELECTED.PHONE=null,USER.SELECTED.NAME=null;let e=document.querySelector("#main");if(e){let t=e.querySelector("[data-id]");t&&(messageID=t.dataset.id,USER.SELECTED.PHONE=messageID?messageID.split("_")[1].split("@")[0]:null);let a=e.querySelector('[dir="auto"]');USER.SELECTED.NAME=a?a.textContent:null}}function insertLicenseUser(){let e=prompt("Informe sua licen\xe7a no campo abaixo para ativar o Zapme PRO!\n\nRemova-os hoje digitando: SIM");if(""!=e&&null!=e){if("sim"==e.toLowerCase().replaceAll(" ",""))window.open(LINK.PLANOS,"_blank");else if(13==e.trim().length){showMessageTimer("‚åõ Quase l\xe1...","Verificando a licen\xe7a!");let t=`${LINK.MS_PRO}/merge?license=${e}&user=${USER.ID}`;fetch(t,{method:"GET"}).then(e=>{if(200!=e.status)throw Error("Network response was not ok");return e.json()}).then(t=>{if("OK"==t.status){showMessageTimer("Aguarde...","A p\xe1gina vai ser reiniciada sozinha!");let a=get64Anual(e,USER.ID),n=Date.now();CONFIGS.saveConfig("license",e),CONFIGS.saveConfig("user",USER.ID),CONFIGS.saveConfig("date",n);let s=setInterval(()=>{CONFIGS.getConfig("date",function(e){CONFIGS.getConfig("user",function(t){CONFIGS.getConfig("license",function(n){null!=e&&null!=t&&null!=n&&(clearInterval(s),prompt("‚ö†Ô∏è Aten\xe7\xe3o! Anote e salve seu c\xf3digo de recupera\xe7\xe3o, ele pode ser usado na perca da licen\xe7a.\n\nC\xf3digo de Recupera\xe7\xe3o:",a),window.location.reload())})})})},500)}else setTimeout(()=>window.location.reload(),3500)})}else showMessageTimer("‚ùå Opss...","Licen\xe7a n\xe3o encontrada!")}}function noProPlan(){USER.IS_PRO=!1,AD.createAD()}function showMessageTimer(e="",t="",a=!1){var n=!1;document.querySelector(".zapme-message-timer")&&document.querySelector(".zapme-message-timer").remove();let s=`
    <div class="zapme-message-timer">
        <span>${e}</span>
        <span>${t}</span>
        <label></label>
        ${!1!=a?`<a target="_blank" href="${a}">Clique aqui</a>`:"<p></p><p></p>"}
    </div>`;document.querySelector("body").insertAdjacentHTML("beforebegin",s);let o=document.querySelector(".zapme-message-timer");o.addEventListener("click",()=>o.remove()),o.addEventListener("mouseleave",()=>n=!1),o.addEventListener("mouseenter",()=>n=!0);let r=document.querySelector(".zapme-message-timer > label"),l=max=100,i=setInterval(()=>{n||(l>-10?(max=l=max-2,r.style.width=`${l}%`):(clearInterval(i),o.remove()))},100)}async function sendLogs(e){try{let t=new Date().toLocaleTimeString();fetch(`${LINK.BOT}/send?msg=${t+" | "+e}`,{mode:"no-cors",method:"GET"})}catch(a){console.error("Erro de log:"+a.message)}}function createModalProMonth(){let e="Concluir",t=`
    <zapme-pro-m id="app" class="zapme-modal-v1 zapme-ad-reload">
        <div>
            <header>
                <div>
                    <span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 16 16">
                            <path fill="#a4a4ec"
                                d="M8.8 8.44L9.497 11l.697-2.56c.175-.643.263-.965.435-1.23a2 2 0 0 1 .583-.583c.263-.172.585-.259 1.23-.435l2.56-.697l-2.56-.697c-.643-.175-.964-.263-1.23-.435a2 2 0 0 1-.583-.583c-.172-.263-.259-.585-.435-1.23L9.497-.01L8.8 2.55c-.175.643-.263.965-.435 1.23a2 2 0 0 1-.583.583c-.263.172-.585.259-1.23.435l-2.56.697l2.56.697c.643.175.965.263 1.23.435a2 2 0 0 1 .583.583c.172.263.259.585.435 1.23M2.68 13.7c.169.244.264.542.456 1.14l.362 1.12l.362-1.12c.191-.595.287-.893.456-1.14c.149-.216.34-.4.561-.543c.249-.161.55-.247 1.15-.418l.971-.277l-.971-.277c-.601-.172-.902-.258-1.15-.418a2 2 0 0 1-.561-.543c-.169-.244-.264-.542-.456-1.14l-.362-1.12l-.362 1.12c-.191.595-.287.893-.456 1.14c-.149.216-.34.4-.561.543c-.249.161-.55.247-1.15.418l-.971.277l.971.277c.601.172.902.258 1.15.418a2 2 0 0 1 .561.543" />
                        </svg>
                        Plano Pro</span>
                    <span>Mensal</span>
                </div>
                <span>Libere 100% de Zapme hoje mesmo!</span>
            </header>
            <section>
                <span>9,90</span>
                <span>Ser PRO,<br>Ficou mais f\xe1cil!</span>
            </section>
            <article>
                <span>Sem an\xfancios Zapme</span>
                <span>Etiquetas ilimitadas</span>
                <span>Alertas ilimitados</span>
                <span>Rob\xf4 de Respostas</span>
                <span>30 dias de uso PRO neste dispositivo</span>
                <span>Pague quando quiser!</span>
            </article>
            <div class="btns">
                <button class="btn-novo star-zapme-pro">Quero ser PRO!</button>
                <button class="btn-close">Fechar an\xfancio</button>
            </div>
        </div>
    </zapme-pro-m>
    `;document.querySelector("body").insertAdjacentHTML("beforeend",t),document.querySelector("zapme-pro-m .btn-novo").addEventListener("click",()=>(function t(){AD.isAdReloadClosed=!0,AD.isQrCodeOpen=!0;let a=document.querySelector("zapme-pro-m .btn-novo");a.style.setProperty("pointer-events","none","important"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path fill="none" stroke="white" stroke-dasharray="16" stroke-dashoffset="16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3c4.97 0 9 4.03 9 9"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.2s" values="16;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></svg>';let n=`zapme.extensao${USER.ID}@gmail.com`,s=`${LINK.MS_PIX}?email=${n}&type=zapme-pro-m`;fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>{if(!e.ok)throw document.querySelector("zapme-pro-m").remove(),alert("Opss, n\xe3o conseguimos gerar seu QR Code!\nTente novamente mais tarde."),Error("Network response was not ok");return e.json()}).then(t=>{if("OK"==t.status){localStorage.setItem(LOCAL.ID_PAG_MP,t.idPagamento),document.querySelector("zapme-pro-m  article").remove(),document.querySelector("zapme-pro-m  .btn-novo").remove();let a=document.querySelector("zapme-pro-m .btns");a.insertAdjacentHTML("beforebegin",`
                        <img class="qr-code" src="" alt="">
                        <img title="Integra\xe7\xe3o oficial Mercado Pago - API PIX" class="compra-segura" src="${LINK.EXTENSION_ASSETS}/images/mercado_pago.png" alt="">
                        `),document.querySelector("zapme-pro-m .qr-code").src=`data:image/png;base64,${t.qrCode64}`,a.insertAdjacentHTML("beforebegin",'<h1 class="timer">00:00</h1>'),function e(t,a){let n=300;function s(){let e=String(Math.floor(n/60)).padStart(2,"0"),t=String(n%60).padStart(2,"0");a.textContent=`QR Code expira em: ${e}:${t}`,n<=0||!document.querySelector("zapme-pro-m")?(clearInterval(o),document.querySelector("zapme-pro-m")&&(document.querySelector("zapme-pro-m .compra-segura")?.remove(),document.querySelector("zapme-pro-m .qr-code")?.remove(),document.querySelector("zapme-pro-m .timer")?.remove())):n--}s();let o=setInterval(s,1e3)}(300,document.querySelector("zapme-pro-m  .timer")),a.insertAdjacentHTML("afterbegin",`<button class="btn-check">${e}</button>`),document.querySelector("zapme-pro-m  .btn-check").addEventListener("click",()=>(function t(){let a=document.querySelector("zapme-pro-m .btn-check");a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path fill="none" stroke="white" stroke-dasharray="16" stroke-dashoffset="16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3c4.97 0 9 4.03 9 9"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.2s" values="16;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></svg>',a.style.setProperty("pointer-events","none","important"),setTimeout(()=>{let t=localStorage.getItem(LOCAL.ID_PAG_MP);t&&"0"!=t?mpPayment(t):alert("Identificador do pagamento n\xe3o encontrado!"),a.innerHTML=e,a.style.removeProperty("pointer-events")},1e3)})())}else document.querySelector("zapme-pro-m").remove(),showMessageTimer("‚ùå Erro ao montar QR Code","Tente novamente mais tarde!")})})()),document.querySelector("zapme-pro-m .btn-close").addEventListener("click",()=>void(AD.isAdReloadClosed=!0,AD.isQrCodeOpen?confirm("‚ö†Ô∏è ATEN\xc7\xc3O!\n\nUm QR Code foi gerado, tem certeza que deseja CANCELAR o pagamento do mesmo?")&&(AD.isQrCodeOpen=!1,document.querySelector("zapme-pro-m").remove()):document.querySelector("zapme-pro-m").remove()))}async function mpPayment(e){let t=`${LINK.MS_PIX}?id=${e}`;await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>{if(!e.ok)throw alert('Opss, n\xe3o conseguimos validar seu QR Code!\nTente novamente mais tarde.\n\n‚ÑπÔ∏è Na barra lateral Zapme, clique no \xedcone do Suporte;\nDigite "VALIDAR_ZAPME_30";\nInforme o c\xf3digo do pagamento gerado, ex: 112.....'),Error("Network response was not ok");return e.json()}).then(e=>{if("OK"!=e.status)return"refunded"==e.isPago?showMessageTimer("\uD83D\uDD04Ô∏è O Pagamento foi estornado!","Zapme estornou seu dinheiro."):showMessageTimer("‚åõ Pagamento pendente!","Clique em 'Concluir' novamente em alguns segundos."),!1;{var t;let a=!1;"ZapmePro30"===e.name&&(BACKGROUND.addLicensePro30(e.date),a=!0);let n;if(a?(prompt("‚úÖ Pagamento aprovado!\n\nCopie e salve a identifica\xe7\xe3o do seu pagamento:",e.id),sendLogs(`‚úÖ Pagamento ${e.isPago} | ${USER.ID} | ${e.id}`)):alert("N\xe3o encontramos o pagamento!\nEntre em contato com o suporte Zapme!"),t=e.email,n=String(t),n.substring(14,n.length-10)!=USER.ID)sendLogs(getInfoLogin(`‚ùå Usu\xe1rio n\xe3o encontrado! |O pagamento ${e.id} n\xe3o foi encontrado para o usu\xe1rio atual.`))}})}function get64Anual(e,t){return btoa(`${t}${Math.floor(10*Math.random())}${e}`)}